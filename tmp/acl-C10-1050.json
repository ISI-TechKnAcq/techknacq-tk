{
  "info": {
    "authors": [
      "Katsuhiko Hayashi",
      "Hajime Tsukada",
      "Katsuhito Sudoh",
      "Kevin Duh",
      "Seiichi Yamamoto"
    ],
    "book": "COLING",
    "id": "acl-C10-1050",
    "title": "Hierarchical Phrase-based Machine Translation with Word-based Reordering Model",
    "url": "https://aclweb.org/anthology/C10-1050",
    "year": 2010
  },
  "references": [
    "acl-C04-1073",
    "acl-D09-1008",
    "acl-D09-1105",
    "acl-J03-1002",
    "acl-J07-2003",
    "acl-J93-2003",
    "acl-N04-4026",
    "acl-N09-1025",
    "acl-P02-1038",
    "acl-P03-1021",
    "acl-P05-1066",
    "acl-P06-1067",
    "acl-P06-1090",
    "acl-P06-1098",
    "acl-P07-1091",
    "acl-P08-1066",
    "acl-W08-0402"
  ],
  "sections": [
    {
      "text": [
        "Hierarchical Phrase-based Machine Translation with Word-based",
        "Reordering Model",
        "Katsuhiko Hayashi*, Hajime Tsukada** Katsuhito Sudoh**, Kevin Duh**, Seiichi Yamamoto*",
        "Hierarchical phrase-based machine translation can capture global reordering with synchronous context-free grammar, but has little ability to evaluate the correctness of word orderings during decoding.",
        "We propose a method to integrate word-based reordering model into hierarchical phrase-based machine translation to overcome this weakness.",
        "Our approach extends the synchronous context-free grammar rules of hierarchical phrase-based model to include reordered source strings, allowing efficient calculation of reordering model scores during decoding.",
        "Our experimental results on Japanese-to-English basic travel expression corpus showed that the BLEU scores obtained by our proposed system were better than those obtained by a standard hierarchical phrase-based machine translation system."
      ]
    },
    {
      "heading": "1. Introduction",
      "text": [
        "Hierarchical phrase-based machine translation (Chiang, 2007; Watanabe et al., 2006) is one of the promising statistical machine translation approaches (Brown et al., 1993).",
        "Its model is formulated by a synchronous context-free grammar (SCFG) which captures the syntactic information between source and target languages.",
        "Although the model captures global reordering by SCFG, it does not explicitly introduce reordering model to constrain word order.",
        "In contrast, lexicalized reordering models (Tillman, 2004; Koehn et al., 2005; Nagata et al., 2006) are extensively used for phrase-based translation.",
        "These lexicalized reordering models cannot be directly applied to hierarchical phrased-based translation since the hierarchical phrase representation uses nonterminal symbols.",
        "To handle global reordering in phrase-based translation, various preprocessing approaches have been proposed, where the source sentence is reordered to target language order beforehand (Xia and McCord, 2004; Collins et al., 2005; Li et al., 2007; Tromble and Eisner, 2009).",
        "However, preprocessing approaches cannot utilize other information in the translation model and target language model, which has been proven helpful in decoding.",
        "This paper proposes a method that incorporates word-based reordering model into hierarchical phrase-based translation to constrain word order.",
        "In this paper, we adopt the reordering model originally proposed by Tromble and Eisner (2009) for the preprocessing approach in phrase-based translation.",
        "To integrate the word-based reordering model, we added a reordered source string into the right-hand-side of SCFG's rules.",
        "By this extension, our system can generate the reordered source sentence as well as target sentence and is able to efficiently calculate the score of the reordering model.",
        "Our method utilizes the translation model and target language model as well as the reordering model during decoding.",
        "This is an advantage of our method over the preprocessing approach.",
        "The remainder of this paper is organized as follows.",
        "Section 2 describes the concept of our approach.",
        "Section 3 briefly reviews our proposed method on hierarchical phrase-based ma-",
        "Table 1: A Japanese-to-English example of various SCFG's rule representations.",
        "Japanese words are romanized.",
        "Our proposed representation of rules has reordered source string to generate reordered source sentence S as well as target sentence T. The \"move-to-front\" means Tromble and Eisner (2009) 's algorithm and the \"attach\" means Al-Onaizan and Papineni (2006) 's algorithm.",
        "chine translation model.",
        "We experimentally compare our proposed system to a standard hierarchical phrase-based system on Japanese-to-English translation task in Section 4.",
        "Then we discuss on related work in Section 5 and conclude this paper in Section 6."
      ]
    },
    {
      "heading": "2. The Concept of Our Approach",
      "text": [
        "The preprocessing approach (Xia and McCord, 2004; Collins et al., 2005; Li et al., 2007; Tromble and Eisner, 2009) splits translation procedure into two stages:",
        "where S is a source sentence, S is a reordered source sentence with respect to the word order of target sentence T. Preprocessing approach has the very deterministic and hard decision in reordering.",
        "To overcome the problem, Li et al.",
        "(2007) proposed k-best appoach.",
        "However, even with a k-best approach, it is difficult to generate good hypotheses S by using only a reordering model.",
        "In this paper, we directly integrated the reordering model into the decoder in order to use the reordering model together with other information in the hierarchical phrase-based translation model and target language model.",
        "Our approach is expressed as the following equation.",
        "S – (S , T).",
        "Our proposed method generates the reordered source sentence S by SCFG and evaluates the correctness of the reorderings using a word-based reordering model of S' which will be introduced in section 3.4."
      ]
    },
    {
      "heading": "3. Hierarchical Phrase-based Model Extension",
      "text": [
        "Hierarchical phrase-based model (Chiang, 2007) induces rules of the form where X is a non-terminal symbol, y is a sequence string of non-terminals and source terminals, a is a sequence string of non-terminals and target terminals.",
        "~ is a one-to-one correspondence for the non-terminals appeared in y and a.",
        "Given a source sentence S, the translation task under this model can be expressed as where D is a derivation and w(D) is a score of the derivation.",
        "Decoder seeks a target sentence",
        "Standard SCFG",
        "X X1 wajinsei no X2 da, X1 is X2 of life>",
        "SCFG (move-to-front)",
        "X X1 wajinsei no X2 da , wa X1 da X2 no jinsei, X1 is X2 of life>",
        "SCFG (attach)",
        "X – < X1 wajinsei no X 2 da , X1 wa da X 2 no jinsei, X1 is X 2 of life>",
        "Uni-gram Features",
        "sr, s-posr",
        "Bi-gram Features",
        "sr, s-posr, sl, s-posl",
        "s-posr, sl, s-posl s-posr, s-posl s-posr, s-posl T(D) which has the highest score w(D).",
        "S(D) is a source sentence under a derivation D. Figure 1 shows the example of Japanese-to-English translation by hierarchical phrase-based machine translation model.",
        "To generate reordered source sentence S as well as target sentence T, we extend hierarchical phrase rule expressed in Equation 3 to where y is a sequence string of non-terminals and source terminals, which is reordered y with respect to the word order of target string a.",
        "The reason why we add y to rules is to efficiently calculate the reordering model scores.",
        "If each rule does not have y , the decoder need to keep word alignments because we cannot know word order of S without them.",
        "The calculation of reordering model scores using word alignments is very wasteful when decoding.",
        "The translation task under our model extends Equation 4 to the following equation:",
        "Our system generates the reordered source sentence S as well as target sentence T. Figure 2 shows the generated reordered source sentence S when translating the example of Figure 1.",
        "Note thatthe structure ofS is the same as thatoftarget sentence T. The decoder generates both Figure 2 and the right hand side of Figure 1, allowing us to score both global and local word reorderings.",
        "To add y' to rules, we permuted y into y' after rule extraction based on Grow-diag-final (Koehn et al., 2005) alignment by GIZA++ (Och and Ney, 2003).",
        "To do this permutation on rules, we applied two methods.",
        "One is the same algorithm as Tromble and Eisner (2009), which reorders aligned source terminals and nonterminals in the same order as that of target side and moves unaligned source terminals to the front of aligned terminals or nonterminals (move-to-front).",
        "The other is the same algorithm as AI-Onaizan and Papineni (2006), which differs from Tromble and Eisner's approach in attaching unaligned source terminals to the closest prealigned source terminals or nonterminals (attach).",
        "This extension of adding y does not increase the number of rules.",
        "Table 1 shows a Japanese-to-English example of the representation of rules for our proposed system.",
        "Japanese words are romanized.",
        "Suppose that source-side string is (X1 wa jinsei no X2 da) and target-side string is (X1 is X2 of life) and their word alignments are a=((jinsei , life) , (no , of) , (da , is)).",
        "Source-side aligned words and nonterminal symbols are sorted into the same order of target string.",
        "Source-side unaligned word (wa) is moved to the front or right of the prealigned symbol (X1).",
        "Surrounding Word Pos Features",
        "We utilize the following score(S') as a feature for the word-based reordering model.",
        "This is incor-polated into the log-linear model (Och and Ney, 2002) of statistical machine translation.",
        "where n is the length of reordered source sentence S (= (s1... sn)), 9 is a weight vector and <\\) is a vector of features.",
        "This reordering model, which is originally proposed by Tromble and Eisner (2009), can assign a score to any possible permutation of source sentences.",
        "Intuitively B[sx, sr ] represents the score of ordering sl before sr; the higher the value, the more we prefer word sl occurs before sr.",
        "Whether Sl should occur before Srdepends on how often this reordering occurs when we reorder the source to target sentence order.",
        "To train B, we used binary feature functions < as used in (Tromble and Eisner, 2009), which were introduced for dependency parsing by McDonald et al.",
        "(2005).",
        "Table 2 shows the kind of features we used in our experiments.",
        "We did not use context features like surrounding word pos features in Table 3 because they were not useful in our preliminary experiments and propose an efficient implementation described in the next section in order to calculate this reordering model when decoding.",
        "To train the parameter 9, we used the perceptron algorithm following Tromble and Eisner (2009).",
        "CKY parsing and cube-pruning are used for decoding of hierarchical phrase-based model (Chiang, 2007).",
        "Figure 3 displays that hierarchical phrase-based decoder seeks new span [1,7] items with rules, utilizing subspan [1,3] items and subspan [4,7] items.",
        "In this example, we use 2-gram language model and +LM decoding.",
        "uni( • ) means 1 gram language model cost for heuristics and interaction usually means language model cost that cannot be calculated offline.",
        "Here, we introduce our two implementations to calculate word-based reordering model scores in this decoding algorithm.",
        "First, we explain a naive implementation shown in the left side of Figure 4.",
        "This algorithm performs the same calculation of reordering model as that of language model.",
        "Each item keeps a part of reordered source sentence.",
        "The reordering score of new item can be calculated as interaction cost when combining subitems with the rule.",
        "The right side of Figure 4 shows our proposed implementation.",
        "This implementation can be adopted to decoding only when we do not use context features like surrounding word pos features in Table 3 (and consider a distance between words in features).",
        "If a span is given, the reordering scores of new item can be calculated for each rule, being independent from the word order of reordered source segment of a subitem.",
        "So, the reordering model scores can be calculated for all rules with spans by using a part of the input source sentence before sorting them for cube pruning.",
        "We expect this sorting of rules with reordering model scores will have good influence on cube pruning.",
        "The right hand side of Figure 4 shows the diffrence between naive and proposed implementation (S is not shown to allow for a clear presentation).",
        "Note the difference is in where/when the reordering scores are inserted: together with the N-gram scores in the case of naive implementation; incorpolated into sorted rules for the proposed implementation."
      ]
    },
    {
      "heading": "4. Experiment 4.1 Purpose",
      "text": [
        "To reveal the effectiveness of integrating the reordering model into decoder, we compared the following setups:",
        "• baseline: a standard hierarchical phrase-based machine translation (Hiero) system.",
        "• preprocessing: applied Tromble and Eisner's approach, then translate by Hiero system.",
        "• Hiero system + reordering model: integrated reordering model into Hiero system.",
        "We used the Joshua Decoder (Li and Khudanpur, 2008) as the baseline Hiero system.",
        "This decoder uses a log-linear model with seven features, which consist of N-gram language model Plm (T), lexical translation model Pw(Y|a), Pw(a|Y), rule translation model P(Y|a), P(a|Y), word penalty and arity penalty.",
        "The \"Hiero + Reordering model\" system has word-based reordering model as an additional feature to baseline features.",
        "For this approach, we use two systems.",
        "One has \"move-to-front\" system and the other is \"attach\" system explained in Section 3.2.",
        "We implemented our proposed algorithm in Section 3.4 to both \"Hiero + Reordering model\" systems.",
        "As for beam width, we use the same setups for each system.",
        "For experiments we used a Japanese-English basic travel expression corpus (BTEC).",
        "Japanese word order is linguistically very different from English and we think Japanese-English pair is a very good test bed for evaluating reordering model.",
        "Data",
        "Sent.",
        "Word.",
        "Avg.",
        "leng",
        "Training",
        "200.8K",
        "2.4M",
        "12.0",
        "en",
        "200.8K",
        "2.3M",
        "11.5",
        "Development",
        "1.0K",
        "10.3K",
        "10.3",
        "en",
        "1.0K",
        "9.8K",
        "9.8",
        "Test",
        "ja",
        "1.0K",
        "14.2K",
        "14.2",
        "en",
        "1.0K",
        "13.5K",
        "13.5",
        "Our training corpus contains about 200.8k sentences.",
        "Using the training corpus, we extracted hierarchical phrase rules and trained 4-gram language model and word-based reordering model.",
        "Parameters were tuned over 1.0k sentences (development data) with single reference by minimum error rate training (MERT) (Och, 2003).",
        "Test data consisted of 1.0k sentences with single reference.",
        "Table 4 shows the condition of corpus in detail.",
        "and PER (Niesen et al., 2000) scores obtained by each system.",
        "The results clearly indicated that our proposed system with word-based reordering model (move-to-front or attach) outperformed baseline system on BLEU scores.",
        "In contrast, there is no significant improvement from baseline on PER.",
        "This suggests that the improvement of BLEU mainly comes from reordering.",
        "In our experiment, preprocessing approach resulted in very poor scores.",
        "Table 6 displays examples showing the cause of the improvements of our system with reordering model (attach) comparing to baseline system.",
        "We can see that the outputs of our system are more fluent than those of baseline system because of reordering model.",
        "As a further analysis, we calculated the BLEU scores of Japanese S predicted from reordering model against true Japanese S made from GIZA++ alignments, were only 26.2 points on development data.",
        "We think the poorness mainly comes from unaligned words since they are un-tractable for the word-based reordering model.",
        "Actually, Japanese sentences in our training data include 34.7% unaligned words.",
        "In spite of the poorness, our proposed method effectively utilize this reordering model in contrast to preprocessing approach."
      ]
    },
    {
      "heading": "5. Related Work",
      "text": [
        "Our approach is similar to preprocessing approach (Xia and McCord, 2004; Collins et al., 2005; Li et al., 2007; Tromble and Eisner, 2009) in that it reorders source sentence in target order.",
        "The difference is this sentence reordering is done in decoding rather than in preprocessing.",
        "A lot of studies on lexicalized reordering (Till-man, 2004; Koehn et al., 2005; Nagata et al., 2006) focus on the phrase-based model.",
        "These works cannnot be directly applied to hierarchical phrase-based model because of the difference between normal phrases and hierarchical phrases that includes nonterminal symbols.",
        "Shen et al.",
        "(2008,2009) proposed a way to integrate dependency structure into target and source side string on hierarchical phrase rules.",
        "This approach is similar to our approach in extending the formalism of rules on hierarchical phrase-based model in order to consider the constraint of word order.",
        "But, our approach differs from (Shen et al., 2008; Shen et al., 2009) in that syntax annotation is not necessary."
      ]
    },
    {
      "heading": "6. Conclusion and Future Work",
      "text": [
        "We proposed a method to integrate word-based reordering model into hierarchical phrase-based machine translation system.",
        "We add y into the hiero rules, but this does not increase the number of rules.",
        "So, this extension itself does not affect the search space of decoding.",
        "In this paper we used Tromble and Eisner's reordering model for our method, but various reordering model can be incorporated to our method, for example S N-gram language model.",
        "Our experimental results on Japanese-to-English task showed that our system outperformed baseline system and preprocessing approach.",
        "In this paper we utilize y only for reordering model.",
        "However, it is possible to use y for other modeling, for example we can use it for rule translation probabilities P (y |y), P (y| y ) for additional feature functions.",
        "Of course, we can",
        "Metrics",
        "System",
        "BLEU",
        "PER",
        "Baseline (Hiero)",
        "28.09",
        "39.68",
        "Preprocessing",
        "17.32",
        "45.27",
        "Hiero + move-to-front",
        "28.85",
        "39.89",
        "Hiero + attach",
        "29.25",
        "39.43",
        "Table 6: Examples of outputs for input sentence S from baseline system TB and our proposed system (attach) TP.",
        "R is a reference.",
        "The underlined portions have equivalent meanings and show the reordering differences.",
        "also utilize reordered target sentence T for various modeling as well.",
        "Addtionally we plan to use S for MERT because we hypothesize the fluent S' leads to fluent T.",
        "S",
        "america de seihin no hanbai wo hajimeru keikaku ga ari masu ka .",
        "kono tegami wa koukuubin de nihon made ikura kakari masu ka .",
        "Tb",
        "sales of product in america are you planning to start ?",
        "this letter by airmail to japan .",
        "how much is it ?",
        "Tp",
        "are you planning to start products in the u.s. ?",
        "how much does it cost to this letter by airmail to japan ?",
        "R",
        "do you plan to begin selling your products in the u.s. ?",
        "how much will it cost to send this letter by air mail to japan ?"
      ]
    }
  ]
}
