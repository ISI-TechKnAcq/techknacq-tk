{
  "info": {
    "authors": [
      "Jan W. Amtrup",
      "Volker Weber"
    ],
    "book": "COLING-ACL",
    "id": "acl-P98-1008",
    "title": "Time Mapping with Hypergraphs",
    "url": "https://aclweb.org/anthology/P98-1008",
    "year": 1998
  },
  "references": [],
  "sections": [
    {
      "heading": "Abstract",
      "text": [
        "Word graphs are able to represent a large number of different utterance hypotheses in a very compact manner.",
        "However, usually they contain a huge amount of redundancy in terms of word hypotheses that cover almost identical intervals in time.",
        "We address this problem by introducing hypergraphs for speech processing.",
        "Hypergraphs can be classified as an extension to word graphs and charts, their edges possibly having several start and end vertices.",
        "By converting ordinary word graphs to hypergraphs one can reduce the number of edges considerably.",
        "We define hypergraphs formally, present an algorithm to convert word graphs into hypergraphs and state consistency properties for edges and their combination.",
        "Finally, we present some empirical results concerning graph size and parsing efficiency."
      ]
    },
    {
      "heading": "1 Introduction",
      "text": [
        "The interface between a word recognizer and language processing modules is a crucial issue with modern speech processing systems.",
        "Given a sufficiently high word recognition rate, it suffices to transmit the most probable word sequence from the recognizer to a subsequent module (e.g. a parser).",
        "A slight extension over this best chain mode would be to deliver n-best chains to improve language processing results.",
        "However, it is usually not enough to deliver just the best 10 or 20 utterances, at least not for reasonable sized applications given todays speech recognition technology.",
        "To overcome this problem, in most current systems word graphs are used as speech-language interface.",
        "Word graphs offer a simple and efficient means to represent a very high number of utterance hypotheses in a extremely compact way (Oerder and Ney, 1993; Aubert and Ney, 1995).",
        "Although they are compact, the use of word graphs leads to problems by itself.",
        "One of them is the current lack of a reasonable measure for word graph size and evaluation of their contents (Amtrup et al., 1997).",
        "The problem we want to address in this paper is the presence of a large number of almost identical word hypotheses.",
        "By almost identical we mean that the start and end vertices of edges differ only slightly.",
        "Consider figure 1 as an example section of a word graph.",
        "There are several word hypotheses representing the words und (and) and dann (then).",
        "The start and end points of them differ by small numbers of frames, each of them 10ms long.",
        "The reasons for the existence of these families of edges are at least twofold:",
        "• Standard HMM-based word recognizers try to start (and finish) word models at each individual frame.",
        "Since the resolution is quite high (10ms, in many cases shorter than the word onset), a word model may have boundaries at several points in time.",
        "• Natural speech (and in particular spontaneously produced speech) tends to blur word boundaries.",
        "This effect is in part responsible for the dramatic decrease in word recognition rate, given fluent speech as input in contrast to isolated words as input.",
        "Figure 1 demonstrates the inaccuracy",
        "of word boundaries by containing several meeting points between und and dann, emphasized by the fact that both words end resp.",
        "start with the same consonant.",
        "Thus, for most words, there is a whole set of word hypotheses in a word graph which results in several meets between two sets of hypotheses.",
        "Both facts are disadvantageous for speech processing: Many word edges result in a high number of lexical lookups and basic operations (e.g. bottom-up proposals of syntactic categories); many meeting points between edges result in a high number of possibly complex operations (like unifications in a parser).",
        "The most obvious way to reduce the number of neighboring, identically labeled edges is to reduce the time resolution provided by a word recognizer (Weber, 1992).",
        "If a word edge is to be processed, the start and end vertices are mapped to the more coarse grained points in time used by linguistic modules and a redundancy check is carried out in order to prevent multiple copies of edges.",
        "This can be easily done, but one has to face the drawback on introducing many more paths through the graph due to artificially constructed overlaps.",
        "Furthermore, it is not simple to choose a correct resolution, as the intervals effectively appearing with word onsets and offsets change considerably with words spoken.",
        "Also, the introduction of cycles has to be avoided.",
        "A more sophisticated schema would use interval graphs to encode word graphs.",
        "Edges of interval graphs do not have individual start and end vertices, but instead use intervals to denote the range of applicability of an edge.",
        "The major problem with interval graphs lies with the complexity of edge access methods.",
        "However, many formal statements shown below will use interval arithmetics, as the argument will be easier to follow.",
        "The approach we take in this paper is to use hypergraphs as representation medium for word graphs.",
        "What one wants is to carry out operations only once and record the fact that there are several start and end points of words.",
        "Hypergraphs (Gondran and Minoux, 1984, p. 30) are generalizations of ordinary graphs that allow multiple start and end vertices of edges.",
        "We extend the approach of H. Weber (Weber, 1995) for time mapping.",
        "Weber considered sets of edges with identical start vertices but slightly different end vertices, for which the notion family was introduced.",
        "We use full hypergraphs as representation and thus additionally allow several start vertices, which results in a further decrease of 6% in terms of resulting chart edges while parsing (cf. section 3).",
        "Figure 2 shows the example section using hyperedges for the two families of edges.",
        "We adopt the way of dealing with different acoustical scores of word hypotheses from Weber."
      ]
    },
    {
      "heading": "2 Word Graphs and Hypergraphs",
      "text": [
        "As described in the introduction, word graphs consist of edges representing word hypotheses generated by a word recognizer.",
        "The start and end point of edges usually denote points in time.",
        "Formally, a word graph is a directed, acyclic, weighted, labeled graph with distinct root and end vertices.",
        "It is a quadruple G =(V,E,W,G) with the following components:",
        "• A nonempty set of graph vertices V = {v1, • • • ,vn}• To associate vertices with points in time, we use a function t: V --* N that returns the frame number for a given vertex.",
        "• A nonempty set of weighted, labeled, directed edges e = {el,.",
        ", end C V xVx W x G. To access the components of an edge e (v, v', w, 1), we use functions a, w and 1, which return the start vertex (a(e) = v), the end vertex (13(e) = v'), the weight (w(e) = w) and the label (1(e) = 1) of an edge, respectively.",
        "• A nonempty set of edge weights W = {w1, , wp}.",
        "Edge weights normally represent a the acoustic score assigned to the word hypothesis by a HMM based word recognizer.",
        "In contrast to interval graphs, we do not require the sets of start and end vertices to be contiguous, i.e. there may be vertices that fall in the range of the start or end vertices of an edge which are not members of that set.",
        "If we are not interested in the individual members of a(e) or #(e), we merely talk about interval graphs."
      ]
    },
    {
      "heading": "2.2 Edge Consistency",
      "text": [
        "Just like word graphs, we demand that hypergraphs are acyclic, i.e. Vv 4 w : v w. In terms of edges, this corresponds to Ve t(a>(e)) < t(0<(e))."
      ]
    },
    {
      "heading": "2.3 Adding Edges to Hypergraphs",
      "text": [
        "Adding a simple word edge to a hypergraph is a simplification of merging two hyperedges bearing the same label into a new hyperedge.",
        "Therefore we are going to explain the more general case for hyperedge merging first.",
        "We analyze which edges of a hypergraph may be merged to form a new hyperedge without loss of linguistic information.",
        "This process has to follow three main principles:",
        "• Edge labels have to be identical • Edge weights (scores) have to be combined to a single value • Edges have to be compatible in their start",
        "and end vertices and must not introduce cycles to the resulting graph Simple Rule Set for Edge Merging Let el, e2 E S be two hyperedges to be checked for merging, where el = (V1, VI', w1, li) and e2 = (172, .q,102,12).",
        "Then eland e2 could be merged into a new hyperedge e3 = (V3, w3, 13) if",
        "• A nonempty set of Labels G = {11,... , /0}, which represents information attached to an edge, usually words.",
        "We define the relation of reachability for vertices (-0 as Vv, w E V:v w <#, 3e E : a(e) = v A 0(e) = w The transitive hull of the reachability relation is denoted by 4.",
        "We already stated that a word graph is acyclic and distinctly rooted and ended."
      ]
    },
    {
      "heading": "2.1 Hypergraphs",
      "text": [
        "Hypergraphs differ from graphs by allowing several start and end vertices for a single edge.",
        "In order to apply this property to word graphs, the definition of edges has to be changed.",
        "The set of edges S becomes a nonempty set of weighted, labeled, directed hyperedges S = {el, ,em} C V*V6 x V*Vh x W x G. Several notions and functions defined for ordinary word graphs have to be adapted to reflect edges having sets of start and end vertices.",
        "• The accessor functions for start and end vertices have to be adapted to return sets of vertices.",
        "Consider an edge e (V,V',w, /), then we redefine : 6 – 4 V*, a(e) := V (1) : V* , 0(e) := V' (2) • Two hyperedges e, e' are adjacent, if they share a common vertex: 0(e) n a(e) 0 0 (3) • The reachability relation is now Vv, w E V: v-÷w<=>BeES:vEa(e)AwEf3(e)",
        "Additionally, we define accessor functions for the first and last start and end vertex of an edge.",
        "We recur to the association of vertices with frame numbers, which is a slight simplification (in general, there is no need for a total ordering on the vertices in a word graph)'.",
        "Furthermore, the intervals covered by start and end vertices are defined.",
        "'The total ordering on vertices is naturally given through the linearity of speech.",
        "ei and 62 have to be removed from the hypergraph while e3 has to be inserted."
      ]
    },
    {
      "heading": "Sufficiency of the Rule-Set",
      "text": [
        "Why is this set of two conditions sufficient for hyperedge merging?",
        "First of all it is clear that we can merge only hyperedges with the same label (this is prescribed by condition 10).",
        "Condition 11 gives advice which hyperedges could be combined and prohibits cycles to be introduced in the hypergraph.",
        "An analysis of the occuring cases shows that this condition is reasonable.",
        "Without loss of generality, we assume that t(0>(ei)) t(0>(e2))•",
        "1. an(ei) n (e2) 0 V au(e2) n (30(ei) 0:",
        "This is the case where either the start vertices of eland the end vertices of e2 or the start vertices of e2 and end vertices of el overlap each other.",
        "The merge of two such hyperedges of this case would result in a hyperedge e3 where t(a>(e3)) > t(13‹ (e3)).",
        "This could introduce cycles to the hypergraph.",
        "So this case is excluded by condition 11.",
        "2. an(e1) fl )30(e2) = 0 A co(e2) C1/30(ei) = 0: This is the complementary case to 1.",
        "(a) t(a<(e2)) t(0>(e1)) This is the case where all vertices of hyperedge el occur before all vertices of hyperedge 62 or in other words the case where two individual independent word hypotheses with same label occur in the word graph.",
        "This case must also not result in an edge merge since )30(ei) c [t(a<(e1)),t(a>(e2))] in the merged edge.",
        "This merge is prohibited by condition 11 since all vertices of 0(e1) have to be smaller than all vertices of a(e2).",
        "is required (62 contains the last end vertex).",
        "t(a<(ei)) < 4/3> (e2)) This is the complementary case to i.",
        "As a result of the empty intersections and the cases (b) and ii we get t(a>(ei)) < t(13<(e2)) and t(a>.",
        "(e2)) < t(i3.<(ei)).",
        "That is in other words Vta E an(el) U cro(e2), to E )30(ei) U it(e2) : t0 < to and just the case demanded by condition 2.",
        "After analyzing all cases of merging of intersections between start and end vertices of two hyperedges we turn to insertion of word hypotheses to a hypergraph.",
        "Of course, a word hypothesis could be seen as interval edge with trivial intervals or as a hyperedge with only one start and one end vertex.",
        "Since this case of adding an edge to a hypergraph is rather easy to depict and is heavily used while parsing word graphs incrementally we discuss it in more detail.",
        "The speech decoder we use delivers word hypotheses incrementally and ordered by the time stamps of their end vertices.",
        "For practical reasons we further sort the start vertices with equal end vertex of a hypergraph by time.",
        "Under this precondition we get the cases shown in figure 3.",
        "The situation is such that eg is a hyperedge already constructed and el – e5 are candidates for insertion.",
        "of a matching hyperdege.",
        "In practice this is not needed and we could check a smaller amount of vertices.",
        "We do this by introducing a maximal time gap which gives us advice how far (in measures of time) we look backwards from the start vertex of a new edge to be inserted into the hypergraph to determine a compatible hyperedge of the hypergraph.",
        "It is not possible to add eland e2 to the hyperedge eg since they would introduce an overlap between the sets of start and end vertices of the potential new hyperedge.",
        "The resulting hyperedges of adding e3 – 65 are depicted below.",
        "Score Normalization Score normalization is a necessary means if one wants to compare hypotheses of different lengths.",
        "Thus, edges in word graphs are assigned normalized scores that account for words of different extensions in time.",
        "The usual measure is the score per frame, which is computed"
      ]
    },
    {
      "heading": "b Score per word",
      "text": [
        "y taking Length of word in frames • When combining several word edges as we do by constructing hyperedges, the combination should be assigned a single value that reflects a certain useful aspect of the originating edges.",
        "In order not to exclude certain hypotheses from consideration in score-driven language processing modules, the score of the hyperedge is inherited from the best-rated word hypothesis (cf. (Weber, 1995)).",
        "We use the minimum of the source acoustic scores, which corresponds to a highest recognition probability."
      ]
    },
    {
      "heading": "Introducing a Maximal Time Gap",
      "text": [
        "The algorithm depicted in figure 4 can be speeded up for practical reasons.",
        "Each vertex between the graph root and the start vertex of the new edge could be one of the start vertices",
        "It is possible to introduce additional paths into a graph by performing time mapping.",
        "Consider fig. 5 as an example.",
        "Taken as a normal word graph, it contains two label sequences, namely a-c-d and b-c-e.",
        "However, if time mapping is performed for the edges labelled c, two additional sequences are introduced: ace and b-c-d.",
        "Thus, time mapping by hypergraphs is not information preserving in a strong sense.",
        "For practical applications this does not present any problems.",
        "The situations in which additional label sequences are introduced are quite rare, we did not observe any linguistic difference in our experiments."
      ]
    },
    {
      "heading": "2.4 Edge Combination",
      "text": [
        "Besides merging the combination of hyperedges, to construct edges with new content is an important task within any speech processing module, e.g. for parsing.",
        "The assumption we will adopt here is that two hyperedges el, e2 E E may be combined if they are adjacent, i.e. they share a common vertex: 0(ei ) n a(e2) 0 0.",
        "The label of the new edge en (which may be used to represent linguistic content) is determined by the component building it, whereas the start and end vertices are determined by",
        "This approach is quite analogous to edge combination methods for normal graphs, e.g. in chart parsing, where two edges are equally required to have a meeting point.",
        "However, score computation for hyperedge combination is more difficult.",
        "The goal is to determine a score per frame by selecting the smallest possible score under all possible meeting vertices.",
        "It is derived by examining all possible connecting vertices (all elements of / := )3(ei) n a(e2)) and computing the resulting score of the new edge: If w(el) < w(e2), we use",
        "where t< = minIt(v)Iv E /1.",
        "If, on the other hand, w(ei) > w(e2), we use",
        "where t> = max{t(v) iv E I}."
      ]
    },
    {
      "heading": "3 Experiments with Hypergraphs",
      "text": [
        "The method of converting word graphs to hypergraphs has been used in two experiments so far.",
        "One of them is devoted to the study of connectionist unification in speech applications (Weber, forthcoming).",
        "The other one, from which the performance figures in this section are drawn, is an experimental speech translation system focusing on incremental operation and uniform representation (Amtrup, 1997).",
        "We want to show the effect of hypergraphs regarding edge reduction and parsing effort.",
        "In order to provide real-world figures, we used word graphs produced by the Hamburg speech recognition system (Huebener et al., 1996).",
        "The test data consisted of one dialogue within the Verbmobil domain.",
        "There were 41 turns with an average length of 4.65s speaking time per turn.",
        "The word graphs contained 1828 edges on the average.",
        "Figure 6 shows the amount of reduction in the number of edges by converting the graphs into hypergraphs.",
        "On the average, 1671 edges were removed (mapped), leaving 157 edges in hypergraphs, approximately 91% less than the original word graphs.",
        "Next, we used both sets of graphs (the original word graphs and hypergraphs) as input to the speech parser used in (Amtrup, 1997).",
        "This parser is an incremental active chart parser which uses a typed feature formalism to describe linguistic entities.",
        "The grammar is focussed on partial parsing and contains rules mainly for noun phrases, prepositional phrases and such.",
        "The integration of complete utterances is neglected.",
        "Figure 7 shows the reduction in terms of chart edges at completion time.",
        "The amount of reduction concerning parsing effort is much less impressive than pure edge reduction.",
        "On the average, parsing of complete graphs resulted in 15547 chart edges, while parsing of hypergraphs produced 3316 chart edges, a reduction of about 79%.",
        "Due to edge combinations, one could have expected a much higher value.",
        "The reason for this fact lies mainly with the redundancy test used in the parser.",
        "There",
        "are many instances of edges which are not inserted into the chart at all, because identical hypotheses are already present.",
        "Consequently, the amount of reduction in parse time is within the same bounds.",
        "Parsing ordinary graphs took 87.7s, parsing of hypergraphs 6.4s, a reduction of 93%.",
        "There are some extreme cases of word graphs, where hypergraph parsing was 94 times faster than word graph parsing.",
        "One of the turns had to be excluded from the test set, because it could not be fully parsed as word graph."
      ]
    },
    {
      "heading": "4 Conclusion",
      "text": [
        "In this paper, we have proposed the application of hypergraph techniques to word graph parsing.",
        "Motivated by linguistic properties of spontaneously spoken speech, we argued that bundles of edges in word graphs should be treated in an integrated manner.",
        "We introduced interval graphs and directed hypergraphs as representation devices.",
        "Directed hypergraphs extend the notion of a family of edges in that they are able to represent edges having several start and end vertices.",
        "We gave a formal definition of word graphs and the necessary extensions to cover hypergraphs.",
        "The conditions that have to be fulfilled in order to merge two hyperedges and to combine two adjacent hyperedges were stated in a formal way; an algorithm to integrate a word hypothesis into a hypergraph was presented.",
        "We proved the applicability of our mechanisms by parsing one dialogue of real-world spoken utterances.",
        "Using hypergraphs resulted in a 91% reduction of initial edges in the graph and a 79% reduction in the total number of chart edges.",
        "Parsing hypergraphs instead of ordinary word graphs reduced the parsing time by 93%."
      ]
    }
  ]
}
