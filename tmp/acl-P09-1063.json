{
  "info": {
    "authors": [
      "Yang Liu",
      "Yajuan Lü",
      "Qun Liu"
    ],
    "book": "ACL-IJCNLP",
    "id": "acl-P09-1063",
    "title": "Improving Tree-to-Tree Translation with Packed Forests",
    "url": "https://aclweb.org/anthology/P09-1063",
    "year": 2009
  },
  "references": [
    "acl-D07-1079",
    "acl-I05-1007",
    "acl-J03-1002",
    "acl-J07-2003",
    "acl-N03-1017",
    "acl-N04-1035",
    "acl-P02-1038",
    "acl-P03-2041",
    "acl-P05-1022",
    "acl-P05-1067",
    "acl-P06-1077",
    "acl-P06-1121",
    "acl-P07-1019",
    "acl-P07-1089",
    "acl-P07-2045",
    "acl-P08-1023",
    "acl-P08-1064",
    "acl-P08-1066",
    "acl-P08-1067",
    "acl-W05-1506",
    "acl-W06-1606",
    "acl-W06-1608",
    "acl-W06-1628",
    "acl-W06-3601"
  ],
  "sections": [
    {
      "text": [
        "Yang Liu and Yajuan Lii and Qun Liu",
        "Key Laboratory of Intelligent Information Processing Institute of Computing Technology Chinese Academy of Sciences P.O.",
        "Box 2704, Beijing 100190, China (yliu,lvyajuan,liuqun}@ict.ac.cn",
        "Current tree-to-tree models suffer from parsing errors as they usually use only 1-best parses for rule extraction and decoding.",
        "We instead propose a forest-based tree-to-tree model that uses packed forests.",
        "The model is based on a probabilistic synchronous tree substitution grammar (STSG), which can be learned from aligned forest pairs automatically.",
        "The decoder finds ways of decomposing trees in the source forest into elementary trees using the source projection of STSG while building target forest in parallel.",
        "Comparable to the state-of-the-art phrase-based system Moses, using packed forests in tree-to-tree translation results in a significant absolute improvement of 3.6 BLEU points over using 1-best trees."
      ]
    },
    {
      "heading": "1. Introduction",
      "text": [
        "Approaches to syntax-based statistical machine translation make use of parallel data with syntactic annotations, either in the form of phrase structure trees or dependency trees.",
        "They can be roughly divided into three categories: string-to-tree models (e.g., (Galley et al., 2006; Marcu et al., 2006; Shen et al., 2008)), tree-to-string models (e.g., (Liu et al., 2006; Huang et al., 2006)), and tree-to-tree models (e.g., (Eisner, 2003; Ding and Palmer, 2005; Cowan et al., 2006; Zhang et al., 2008)).",
        "By modeling the syntax of both source and target languages, tree-to-tree approaches have the potential benefit of providing rules linguistically better motivated.",
        "However, while string-to-tree and tree-to-string models demonstrate promising results in empirical evaluations, tree-to-tree models have still been underachieving.",
        "We believe that tree-to-tree models face two major challenges.",
        "First, tree-to-tree models are more vulnerable to parsing errors.",
        "Obtaining syntactic annotations in quantity usually entails running automatic parsers on a parallel corpus.",
        "As the amount and domain of the data used to train parsers are relatively limited, parsers will inevitably output ill-formed trees when handling real-world text.",
        "Guided by such noisy syntactic information, syntax-based models that rely on 1-best parses are prone to learn noisy translation rules in training phase and produce degenerate translations in decoding phase (Quirk and Corston-Oliver, 2006).",
        "This situation aggravates for tree-to-tree models that use syntax on both sides.",
        "Second, tree-to-tree rules provide poorer rule coverage.",
        "As a tree-to-tree rule requires that there must be trees on both sides, tree-to-tree models lose a larger amount of linguistically unmotivated mappings.",
        "Studies reveal that the absence of such non-syntactic mappings will impair translation quality dramatically (Marcu et al., 2006; Liu et al., 2007; DeNeefe et al., 2007; Zhang et al., 2008).",
        "Compactly encoding exponentially many parses, packed forests prove to be an excellent fit for alleviating the above two problems (Mi et we propose a forest-based tree-to-tree model.",
        "To learn STSG rules from aligned forest pairs, we introduce a series of notions for identifying minimal tree-to-tree rules.",
        "Our decoder first converts the source forest to a translation forest and then finds the best derivation that has the source yield of one source tree in the forest.",
        "Comparable to Moses, our forest-based tree-to-tree model achieves an absolute improvement of 3.6 BLEU points over conventional tree-based model.",
        "bushi yu shalong juxing le huitan",
        "Figure 1: An aligned packed forest pair.",
        "Each node is assigned a unique identity for reference.",
        "The solid lines denote hyperedges and the dashed lines denote word alignments.",
        "Shaded nodes are frontier nodes."
      ]
    },
    {
      "heading": "2. Model",
      "text": [
        "Figure 1 shows an aligned forest pair for a Chinese sentence and an English sentence.",
        "The solid lines denote hyperedges and the dashed lines denote word alignments between the two forests.",
        "Each node is assigned a unique identity for reference.",
        "Each hyperedge is associated with a probability, which we omit in Figure 1 for clarity.",
        "In a forest, a node usually has multiple incoming hyperedges.",
        "We use IN(v) to denote the set of incoming hyperedges of node v. For example, the source node \"IP\" has following two incoming hyperedges:",
        "Formally, a packed parse forest is a compact representation of all the derivations (i.e., parse trees) for a given sentence under a context-free grammar.",
        "Huang and Chiang (2005) define a forest as a tuple (V, E, v, R), where V is a finite set of nodes, E is a finite set of hyperedges, v e V is a distinguished node that denotes the goal item in parsing, and R is the set of weights.",
        "For a given sentence w1:l = w1.. .wl, each node v e V is in the form of Xitj, which denotes the recognition of non-terminal X spanning the substring from positions i through j (that is, wi+1... Wj).",
        "Each hyperedge e e E is a triple e = (T(e), h(e), f (e)), where h(e) e V is its head, T(e) e V* is a vector of tail nodes, and f(e) is a weight function from RlT(e)l to R.",
        "Our forest-based tree-to-tree model is based on a probabilistic STSG (Eisner, 2003).",
        "Formally, an STSG can be defined as a quintuple G = (Fs, Ft, Ss, St,P), where",
        "• Fs and Ft are the source and target alphabets, respectively,",
        "• Ss and St are the source and target start symbols, and",
        "• P is a set of production rules.",
        "A rule r is a triple (ts,tt, ~) that describes the correspondence ~ between a source tree ts and a target tree tt.",
        "To integrate packed forests into tree-to-tree translation, we model the process of synchronous generation of a source forest Fs and a target forest Ft using a probabilistic STSG grammar:",
        "TS£FS TtEFt TSEFS Tt EFt dED TSEFS Tt EFt dEDrEd",
        "where Ts is a source tree, Tt is a target tree, D is the set of all possible derivations that transform Ts into Tt, d is one such derivation, and r is a tree-to-tree rule.",
        "Table 1 shows a derivation of the forest pair in Figure 1.",
        "A derivation is a sequence oftree-to-tree rules.",
        "Note that we use x to represent a nonterminal."
      ]
    },
    {
      "heading": "3. Rule Extraction",
      "text": [
        "Given an aligned forest pair as shown in Figure 1, how to extract all valid tree-to-tree rules that explain its synchronous generation process?",
        "By constructing a theory that gives formal semantics to word alignments, Galley et al.",
        "(2004) give principled answers to these questions for extracting tree-to-string rules.",
        "Their GHKM procedure draws connections among word alignments, derivations, and rules.",
        "They first identify the tree nodes that subsume tree-string pairs consistent with word alignments and then extract rules from these nodes.",
        "By this means, GHKM proves to be able to extract all valid tree-to-string rules from training instances.",
        "Although originally developed for the tree-to-string case, it is possible to extend GHKM to extract all valid tree-to-tree rules from aligned packed forests.",
        "In this section, we introduce our tree-to-tree rule extraction method adapted from GHKM, which involves four steps: (1) identifying the correspondence between the nodes in forest pairs, (2) identifying minimum rules, (3) inferring composed rules, and (4) estimating rule probabilities.",
        "To learn tree-to-tree rules, we need to find aligned tree pairs in the forest pairs.",
        "To do this, the starting point is to identify the correspondence between nodes.",
        "We propose a number of attributes for nodes, most of which derive from GHKM, to facilitate the identification.",
        "Definition 1 Given a node v, its span a(v) is an index set of the words it covers.",
        "For example, the span of the source node \"VP-B\" is {4, 5,6} as it covers three source words: \"juxing\", \"le\", and \"huitan\".",
        "For convenience, we use {4-6} to denotes a contiguous span {4, 5, 6}.",
        "Definition 2 Given a node v, its corresponding span y(v) is the index set of aligned words on another side.",
        "For example, the corresponding span of the source node \"VP-B\" is {2, 4}, corresponding to the target words \"held\" and \"talk\".",
        "Definition 3 Given a node v, its complement span 5(v) is the union of corresponding spans of nodes that are neither antecedents nor descendants of v.",
        "For example, the complement span ofthe source node \"VP-B\" is {1, 5-6}, corresponding to target words \"Bush\", \"with\", and \"Sharon\".",
        "Definition 4 A node v is said to be consistent with alignment if and only if closure(Y (v)) If S(v) = 0.",
        "For example, the closure of the corresponding span of the source node \"VP-B\" is {2-4} and its complement span is {1, 5-6}.",
        "As the intersection of the closure and the complement span is an empty set, the source node \"VP-B\" is consistent with the alignment.",
        "id",
        "span",
        "cspan",
        "complement",
        "consistent",
        "frontier",
        "counterparts",
        "1",
        "1-6",
        "1-2, 4-6",
        "1",
        "29",
        "2",
        "1-3",
        "1,5-6",
        "2,4",
        "0",
        "3",
        "2-6",
        "2,4-6",
        "1",
        "28",
        "4",
        "2-3",
        "5-6",
        "1-2,4",
        "25,26",
        "5",
        "4-6",
        "2,4",
        "1,5-6",
        "6",
        "1-1",
        "1",
        "2,4-6",
        "16,22",
        "7",
        "3-3",
        "6",
        "1-2, 4-5",
        "21,24",
        "8",
        "6-6",
        "4",
        "1-2,5-6",
        "19,23",
        "9",
        "1-1",
        "1",
        "2,4-6",
        "16,22",
        "10",
        "2-2",
        "5",
        "1-2, 4,6",
        "20",
        "11",
        "2-2",
        "5",
        "1-2, 4,6",
        "20",
        "12",
        "3-3",
        "6",
        "1-2, 4-5",
        "21,24",
        "13",
        "4-4",
        "2",
        "1,4-6",
        "17",
        "14",
        "5-5",
        "1-2, 4-6",
        "15",
        "6-6",
        "4",
        "1-2,5-6",
        "19,23",
        "16",
        "1-1",
        "1",
        "2-4,6",
        "6,9",
        "17",
        "2-2",
        "4",
        "1-3,6",
        "13",
        "18",
        "3-3",
        "1-4,6",
        "19",
        "4-4",
        "6",
        "1-4",
        "8, 15",
        "20",
        "5-5",
        "2",
        "1,3-4,6",
        "10, 11",
        "21",
        "6-6",
        "3",
        "1-2, 4,6",
        "7, 12",
        "22",
        "1-1",
        "1",
        "2-4,6",
        "6,9",
        "23",
        "3-4",
        "6",
        "1-4",
        "8, 15",
        "24",
        "6-6",
        "3",
        "1-2, 4,6",
        "7, 12",
        "25",
        "5-6",
        "2-3",
        "1, 4, 6",
        "4",
        "26",
        "5-6",
        "2-3",
        "1, 4, 6",
        "4",
        "27",
        "3-6",
        "2-3,6",
        "1,4",
        "28",
        "2-6",
        "2-4,6",
        "1",
        "3",
        "29",
        "1-6",
        "1-4,6",
        "1",
        "Figure 2: (a) A frontier tree; (b) a minimal frontier tree; (c) a frontier tree pair; (d) a minimal frontier tree pair.",
        "All trees are taken from the example forest pair in Figure 1.",
        "Shaded nodes are frontier nodes.",
        "Each node is assigned an identity for reference.",
        "Definition 5 A node v is said to be a frontier node if and only if:"
      ]
    },
    {
      "heading": "1.. v is consistent;",
      "text": [
        "2.",
        "There exists at least one consistent node v' on another side satisfying:",
        "• closure(Y(v)) C <j(v').",
        "v' is said to be a counterpart of v. We use t(v) to denote the set ofcounterparts ofv.",
        "A frontier node often has multiple counterparts on another side due to the usage of unary rules in parsers.",
        "For example, the source node \"NP-B\" has two counterparts on the target side: \"NNP\" and \"NP\".",
        "Conversely, the target node \"NNP\" also has two counterparts counterparts on the source side: \"NR\" and \"NP-B\".",
        "The node attributes of the example forest pair are listed in Table 2.",
        "We use identities to refer to nodes.",
        "\"cspan\" denotes corresponding span and \"complement\" denotes complement span.",
        "In Figure 1 , there are 12 frontier nodes (highlighted by shading) on the source side and 12 frontier nodes on the target side.",
        "Note that while a consistent node is equal to a frontier node in GHKM, this is not the case in our method because we have a tree on the target side.",
        "Frontier nodes play a critical role in forest-based rule extraction because they indicate where to cut the forest pairs to obtain tree-to-tree rules.",
        "Given the frontier nodes, the next step is to identify aligned tree pairs, from which tree-to-tree rules derive.",
        "Following Galley et al.",
        "(2006), we distinguish between minimal and composed rules.",
        "As a composed rule can be decomposed as a sequence of minimal rules, we are particularly interested in how to extract minimal rules.",
        "Also, we introduce a number of notions to help identify minimal rules.",
        "Definition 6 A frontier tree is a subtree in a forest satisfying:"
      ]
    },
    {
      "heading": "1.. Its root is a frontier node;",
      "text": [
        "2.",
        "If the tree contains only one node, it must be a lexicalized frontier node;",
        "3.",
        "If the tree contains more than one nodes, its leaves are either non-lexicalized frontier nodes or lexicalized non-frontier nodes.",
        "For example, Figure 2(a) shows a frontier tree in which all nodes are frontier nodes.",
        "Definition 7 A minimal frontier tree is a frontier tree such that all nodes other than the root and leaves are non-frontier nodes.",
        "For example, Figure 2(b) shows a minimal frontier tree.",
        "Definition 8 A frontier tree pair is a triple (ts,tt, ~) satisfying:"
      ]
    },
    {
      "heading": "1.. t s is a source frontier tree;",
      "text": []
    },
    {
      "heading": "2.. t t is a target frontier tree;",
      "text": []
    },
    {
      "heading": "3.. The root of t s is a counterpart of that of t t ;",
      "text": [
        "4.",
        "There is a one-to-one correspondence ~ between the frontier leaves of ts and tt.",
        "For example, Figure 2(c) shows a frontier tree pair.",
        "Definition 9 A frontier tree pair (ts, tt, ~) is said to be a subgraph of another frontier tree pair (ts'.tt', ~') if and only if:",
        "3. ts is a subgraph of ts'; 4. tt is a subgraph of tt .",
        "For example, the frontier tree pair shown in Figure 2(d) is a subgraph of that in Figure 2(c).",
        "Definition 10 A frontier tree pair is said to be minimal if and only if it is not a subgraph of any other frontier tree pair that shares with the same root.",
        "For example, Figure 2(d) shows a minimal frontier tree pair.",
        "Our goal is to find the minimal frontier tree pairs, which correspond to minimal tree-to-tree rules.",
        "For example, the tree pair shown in Figure 2(d) denotes a minimal rule as follows:",
        "Figure 3 shows the algorithm for identifying minimal frontier tree pairs.",
        "The input is a source forest Fs, a target forest Ft, and a source frontier node v (line 1).",
        "We use a set P to store collected minimal frontier tree pairs (line 2).",
        "We first call the procedure FindTrees(Fs , v) to identify a set of frontier trees rooted at v in Fs (line 3).",
        "For example, for the source frontier node \"PP\" in Figure 1, we obtain two frontier trees:",
        "Then, we try to find the set of corresponding target frontier trees (i.e., Tt).",
        "For each counterpart v' of v (line 5), we call the procedure Find-Trees^ , v') to identify a set of frontier trees rooted at v in Ft (line 6).",
        "For example, the source 1: procedure FindTreePairs(Fs ,Ft,v) 8: for (ts,tt)eTS xTt do 9: if ts ~ tt then 18: end procedure frontier node \"PP\" has two counterparts on the target side: \"NP\" and \"PP\".",
        "There are four target frontier trees rooted at the two nodes:",
        "Therefore, there are 2 x 4 = 8 pairs of trees.",
        "We examine each tree pair (ts,tt) (line 8) to see whether it is a frontier tree pair (line 9) and then update P (line 10).",
        "In the above example, all the eight tree pairs are frontier tree pairs.",
        "Finally, we keep only minimal frontier tree pairs in P (lines 13-15).",
        "As a result, we obtain the following two minimal frontier tree pairs for the source frontier node \"PP\":",
        "To maintain a reasonable rule table size, we restrict that the number of nodes in a tree of an STSG rule is no greater than n, which we refer to as maximal node count.",
        "It seems more efficient to let the procedure FindTrees(F, v) to search for minimal frontier trees rather than frontier trees.",
        "However, a minimal frontier tree pair is not necessarily a pair of minimal frontier trees.",
        "On our Chinese-English corpus, we find that 38% of minimal frontier tree pairs are not pairs of minimal frontier trees.",
        "As a result, we have to first collect all frontier tree pairs and then decide on the minimal ones.",
        "After minimal rules are learned, composed rules can be obtained by composing two or more minimal rules.",
        "For example, the composition of the second rule and the third rule in Table 1 produces a new rule:",
        "While minimal rules derive from minimal frontier tree pairs, composed rules correspond to nonminimal frontier tree pairs.",
        "We follow Mi and Huang (2008) to estimate the fractional count of a rule extracted from an aligned forest pair.",
        "Intuitively, the relative frequency of a subtree that occurs in a forest is the sum of all the trees that traverse the subtree divided by the sum of all trees in the forest.",
        "Instead of enumerating all trees explicitly and computing the sum of tree probabilities, we resort to inside and outside probabilities for efficient calculation:",
        "v£leaves(ts ) vdleaves(tt )",
        "wherec(r) isthefractionalcountofarule,tsisthe source tree in r, tt is the target tree in r, root( ) a function that gets tree root, leaves( ) is a function that gets tree leaves, and a(v) and //(v) are outside and inside probabilities, respectively."
      ]
    },
    {
      "heading": "4. Decoding",
      "text": [
        "Given a source packed forest Fs, our decoder finds the target yield of the single best derivation d that has source yield of Ts(d) e Fs:",
        "We extend the model in Eq.",
        "1 to a log-linear model (Och and Ney, 2002) that uses the following eight features: relative frequencies in two directions, lexical weights in two directions, number of rules used, language model score, number of target words produced, and the probability of matched source tree (Mi et al., 2008).",
        "Given a source parse forest and an STSG grammar G, we first apply the conversion algorithm proposed by Mi et al.",
        "(2008) to produce a translation forest.",
        "The translation forest has a similar hypergraph structure.",
        "While the nodes are the same as those of the parse forest, each hyperedge is associated with an STSG rule.",
        "Then, the decoder runs on the translation forest.",
        "We use the cube pruning method (Chiang, 2007) to approximately intersect the translation forest with the language model.",
        "Traversing the translation forest in a bottom-up order, the decoder tries to build target parses at each node.",
        "After the first pass, we use lazy Algorithm 3 (Huang and Chiang, 2005) to generate k-best translations for minimum error rate training."
      ]
    },
    {
      "heading": "5. Experiments 5.1 Data Preparation",
      "text": [
        "We evaluated our model on Chinese-to-English translation.",
        "The training corpus contains 840K Chinese words and 950K English words.",
        "A tri-gram language model was trained on the English sentences ofthe training corpus.",
        "We used the 2002 NIST MT Evaluation test set as our development set, and used the 2005 NIST MT Evaluation test set as our test set.",
        "We evaluated the translation quality using the BLEU metric, as calculated by mteval-v11b.pl with its default setting except that we used case-insensitive matching of n-grams.",
        "To obtain packed forests, we used the Chinese parser (Xiong et al., 2005) modified by Haitao Mi and the English parser (Charniak and Johnson, 2005) modified by Liang Huang to produce entire parse forests.",
        "Then, we ran the Python scripts (Huang, 2008) provided by Liang Huang to output packed forests.",
        "To prune the packed forests, Huang (2008) uses inside and outside probabilities to compute the distance of the best derivation that traverses a hyperedge away from the globally best derivation.",
        "A hyperedge will be pruned away if the difference is greater than a threshold p. Nodes with all incoming hyperedges pruned are also pruned.",
        "The greater the threshold p is,",
        "maximal node count",
        "the more parses are encoded in a packed forest.",
        "We obtained word alignments of the training data by first running GIZA++ (Och and Ney, 2003) and then applying the refinement rule \"grow-diag-final-and\" (Koehn et al., 2003).",
        "Table 3 shows the BLEU scores of tree-based and forest-based tree-to-tree models achieved on the test set over different pruning thresholds.",
        "p is the threshold for pruning packed forests, \"avg trees\" is the average number of trees encoded in one forest on the test set, and \"# of rules\" is the number of STSG rules used on the test set.",
        "We restrict that both source and target trees in a tree-to-tree rule can contain at most 10 nodes (i.e., the maximal node count n = 10).",
        "The 95% confidence intervals were computed using Zhang 's significance tester (Zhang et al., 2004).",
        "We chose five different pruning thresholds in our experiments: p = 0, 2, 5, 8,10.",
        "The forests pruned by p = 0 contained only 1-best tree per sentence.",
        "With the increase ofp, the average number of trees encoded in one forest rose dramatically.",
        "When p was set to 10, there were over 100M parses encoded in one forest on average.",
        "Table 4: Comparison of rule extraction time (seconds/1000 sentence pairs) and decoding time (second/sentence)",
        "Moreover, the more trees are encoded in packed forests, the more rules are made available to forest-based models.",
        "The number of rules when p = 10 was almost 10 times of p = 0.",
        "With the increase of the number of rules used, the BLEU score increased accordingly.",
        "This suggests that packed forests enable tree-to-tree model to learn more useful rules on the training data.",
        "However, when a pack forest encodes over 1M parses per sentence, the improvements are less significant, which echoes the results in (Mi et al., 2008).",
        "The forest-based tree-to-tree model outperforms the original model that uses 1-best trees dramatically.",
        "The absolute improvement of 3.6 BLEU points (from 0.2021 to 0.2385) is statistically significant at p < 0.01 using the signtest as described by Collins et al.",
        "(2005), with 700(+1), 360(-1), and 15(0).",
        "We also ran Moses (Koehn et al., 2007) with its default setting using the same data and obtained a BLEU score of 0.2366, slightly lower than our best result (i.e., 0.2385).",
        "But this difference is not statistically significant.",
        "Figure 4 demonstrates the effect of pruning threshold and maximal node count on rule coverage.",
        "We extracted phrase pairs from the training data to investigate how many phrase pairs can be captured by lexicalized tree-to-tree rules that contain only terminals.",
        "We set the maximal length of phrase pairs to 10.",
        "For tree-based tree-to-tree model, the coverage was below 8% even the maximal node count was set to 10.",
        "This suggests that conventional tree-to-tree models lose over 92% linguistically unmotivated mappings due to hard syntactic constraints.",
        "The absence of such non-syntactic mappings prevents tree-based tree-to-tree models from achieving comparable results to phrase-based models.",
        "With more parses included",
        "V",
        "avg trees",
        "# of rules",
        "BLEU",
        "V",
        "extraction",
        "decoding",
        "0",
        "1",
        "73,614",
        "0.2021 ± 0.0089",
        "0",
        "1.26",
        "6.76",
        "2",
        "238.94",
        "105,214",
        "0.2165 ± 0.0081",
        "2",
        "2.35",
        "8.52",
        "5",
        "5.78 x 10",
        "347, 526",
        "0.2336 ± 0.0078",
        "5",
        "6.34",
        "14.87",
        "8",
        "6.59 x 10",
        "573,738",
        "0.2373 ± 0.0082",
        "8",
        "8.51",
        "19.78",
        "10",
        "1.05 x 10s",
        "743,211",
        "0.2385 ± 0.0084",
        "10",
        "10.21",
        "25.81",
        "1 1 1 1 1 1",
        "1 1 1 ■",
        "-",
        "■ ...B--",
        "-",
        "' .0-\"'\"",
        "-",
        "p=0 -1-",
        "p=2 – x – ",
        "- a",
        "p=5",
        "-",
        "p 8 e",
        "......",
        "1",
        "p=10 – ■-f i i",
        "maximal node count",
        "in packed forests, the rule coverage increased accordingly.",
        "When p = 10 and n = 10, the coverage was 9.7%, higher than that of p = 0.",
        "As a result, packed forests enable tree-to-tree models to capture more useful source-target mappings and therefore improve translation quality.",
        "Table 4 gives the rule extraction time (seconds/1000 sentence pairs) and decoding time (second/sentence) with varying pruning thresholds.",
        "We found that the extraction time grew faster than decoding time with the increase of p. One possible reason is that the number of frontier tree pairs (see Figure 3) rose dramatically when more parses were included in packed forests.",
        "Figure 5 shows the effect of maximal node count on BLEU scores.",
        "With the increase of maximal node count, the BLEU score increased dramatically.",
        "This implies that allowing tree-to-tree rules to capture larger contexts will strengthen the expressive power of tree-to-tree model.",
        "We also conducted an experiment on larger data to further examine the effectiveness of our approach.",
        "We concatenated the small corpus we used above and the FBIS corpus.",
        "After removing the sentences that we failed to obtain forests, the new training corpus contained about 260K sentence pairs with 7.39M Chinese words and 9.41M English words.",
        "We set the forest pruning threshold p = 5.",
        "Moses obtained a BLEU score of 0.3043 and our forest-based tree-to-tree system achieved a BLEU score of 0.3059.",
        "The difference is still not significant statistically."
      ]
    },
    {
      "heading": "6. Related Work",
      "text": [
        "In machine translation, the concept of packed forest is first used by Huang and Chiang (2007) to characterize the search space of decoding with language models.",
        "The first direct use of packed forest is proposed by Mi et al.",
        "(2008).",
        "They replace 1 best trees with packed forests both in training and decoding and show superior translation quality over the state-of-the-art hierarchical phrase-based system.",
        "We follow the same direction and apply packed forests to tree-to-tree translation.",
        "Zhang et al.",
        "(2008) present a tree-to-tree model thatuses STSG.",
        "To capture non-syntactic phrases, they apply tree-sequence rules (Liu et al., 2007) to tree-to-tree models.",
        "Their extraction algorithm first identifies initial rules and then obtains abstract rules.",
        "While this method works for 1-best tree pairs, it cannot be applied to packed forest pairs because it is impractical to enumerate all tree pairs over a phrase pair.",
        "While Galley (2004) describes extracting tree-to-string rules from 1-best trees, Mi and Huang et al.",
        "(2008) go further by proposing a method for extracting tree-to-string rules from aligned forest-string pairs.",
        "We follow their work and focus on identifying tree-tree pairs in a forest pair, which is more difficult than the tree-to-string case."
      ]
    },
    {
      "heading": "7. Conclusion",
      "text": [
        "We have shown how to improve tree-to-tree translation with packed forests, which compactly encode exponentially many parses.",
        "To learn STSG rules from aligned forest pairs, we first identify minimal rules and then get composed rules.",
        "The decoder finds the best derivation that have the source yield of one source tree in the forest.",
        "Experiments show that using packed forests in tree-to-tree translation results in dramatic improvements over using 1-best trees.",
        "Our system also achieves comparable performance with the state-of-the-art phrase-based system Moses.",
        "Acknowledgement",
        "The authors were supported by National Natural Science Foundation ofChina, Contracts 60603095 and 60736014, and 863 State Key Project No.",
        "2006AA010108.",
        "Part of this work was done while Yang Liu was visiting the SMT group led by Stephan Vogel at CMU.",
        "We thank the anonymous reviewers for their insightful comments.",
        "Many thanks go to Liang Huang, Haitao Mi, and Hao Xiong for their invaluable help in producing packed forests.",
        "We are also grateful to Andreas Zollmann, Vamshi Ambati, and Kevin Gimpel for their helpful feedback."
      ]
    }
  ]
}
