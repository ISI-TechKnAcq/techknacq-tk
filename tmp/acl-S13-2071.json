{
  "info": {
    "authors": [
      "Øyvind Selmer",
      "Mikael Brevik",
      "Björn Gambäck",
      "Lars Bungum"
    ],
    "book": "*SEM",
    "id": "acl-S13-2071",
    "title": "NTNU: Domain Semi-Independent Short Message Sentiment Classification",
    "url": "https://aclweb.org/anthology/S13-2071",
    "year": 2013
  },
  "references": [
    "acl-C00-1044",
    "acl-H05-1044",
    "acl-N10-1119",
    "acl-P11-2008",
    "acl-S13-2052",
    "acl-S13-2053",
    "acl-W03-1017",
    "acl-W10-0513",
    "acl-W10-3110"
  ],
  "sections": [
    {
      "heading": "Abstract",
      "text": [
        "The paper describes experiments using grid searches over various combinations of machine learning algorithms, features and preprocessing strategies in order to produce the optimal systems for sentiment classification of microblog messages.",
        "The approach is fairly domain independent, as demonstrated by the systems achieving quite competitive results when applied to short text message data, i.e., input they were not originally trained on."
      ]
    },
    {
      "heading": "1 Introduction",
      "text": [
        "The informal texts in microblogs such as Twitter and on other social media represent challenges for traditional language processing systems.",
        "The posts (?tweets?)",
        "are limited to 140 characters and often contain misspellings, slang and abbreviations.",
        "On the other hand, the posts are often opinionated in nature as a very result of their informal character, which has led Twitter to being a gold mine for sentiment analysis (SA).",
        "SA for longer texts, such as movie reviews, has been explored since the 1990s;1 however, the limited amount of attributes in tweets makes the feature vectors shorter than in documents and the task of analysing them closely related to phrase-and sentence-level SA (Wilson et al., 2005; Yu and Hatzivassiloglou, 2003).",
        "Hence there are no guarantees that algorithms that perform well on document-level SA will do as well on tweets.",
        "On the other hand, it is possible to exploit some of the special features of the web language, e.g., emoticons",
        "and emotionally loaded abbreviations.",
        "Thus the data will normally go through some preprocessing before any classification is attempted, e.g., by filtering out Twitter specific symbols and functions, in particular retweets (reposting another user's tweet), mentions (?",
        "@?, tags used to mention another user), hashtags (?#?, used to tag a tweet to a certain topic), emoticons, and URLs (linking to an external resource, e.g., a news article or a photo).",
        "The first system to really use Twitter as a corpus was created as a student course project at Stanford (Go et al., 2009).",
        "Pak and Paroubek (2010) experimented with sentiment classification of tweets using Support Vector Machines and Conditional Random Fields, benchmarked with a Na?",
        "?ve Bayes Classifier baseline, but were unable to beat the baseline.",
        "Later, and as Twitter has grown in popularity, many other systems for Twitter Sentiment Analysis (TSA) have been developed (see, e.g., Maynard and Funk, 2011; Mukherjee et al., 2012; Saif et al., 2012; Chamlertwat et al., 2012).",
        "Clearly, it is possible to classify the sentiment of tweets in a single step; however, the approach to TSA most used so far is a two-step strategy where the first step is subjectivity classification and the second step is polarity classification.",
        "The goal of subjectivity classification is to separate subjective and objective statements.",
        "Pak and Paroubek (2010) counted word frequencies in a subjective vs an objective set of tweets; the results showed that interjections and personal pronouns are the strongest indicators of subjectivity.",
        "In general, these word classes, adverbs and (in particular) adjectives (Hatzivassiloglou and Wiebe, 2000) have shown to be good subjectivity indicators, which has made part",
        "of-speech (POS) tagging a reasonable technique for filtering out objective tweets.",
        "Early research on TSA showed that the challenging vocabulary made it harder to accurately tag tweets; however, Gimpel et al. (2011) report on using a POS tagger for marking tweets, performing with almost 90% accuracy.",
        "Polarity classification is the task of separating the subjective statements into positives and negatives.",
        "Kouloumpis et al. (2011) tried different solutions for tweet polarity classification, and found that the best performance came from using n-grams together with lexicon and microblog features.",
        "Interestingly, performance dropped when a POS tagger was included.",
        "They speculate that this can be due to the accuracy of the POS tagger itself, or that POS tagging just is less effective for analysing tweet polarity.",
        "In this paper we will explore the application of a set of machine learning algorithms to the task of Twitter sentiment classification, comparing one-step and two-step approaches, and investigate a range of different preprocessing methods.",
        "What we explicitly will not do, is to utilise a sentiment lexicon, even though many methods in TSA rely on lexica with a sentiment score for each word.",
        "Nielsen (2011) manually built a sentiment lexicon specialized for Twitter, while others have tried to induce such lexica automatically with good results (Velikovich et al., 2010; Mohammad et al., 2013).",
        "However, sentiment lexica ?",
        "and in particular specialized Twitter sentiment lexica ?",
        "make the classification more domain dependent.",
        "Here we will instead aim to exploit domain independent approaches as far as possible, and thus abstain from using sentiment lexica.",
        "The rest of the paper is laid out as follows: Section 2 introduces the twitter data sets used in the study.",
        "Then Section 3 describes the system built for carrying out the twitter sentiment classification experiments, which in turn are reported and discussed in Sections 4 and 5."
      ]
    },
    {
      "heading": "2 Data",
      "text": [
        "Manually collecting information from Twitter would be a tedious task, but Twitter offers a well documented Representational State Transfer Application Programming Interface (REST API) which allows users to collect a corpus from the micro-blogosphere.",
        "Most of the data used in TSA research is collected through the Twitter API, either by",
        "searching for a certain topic/keyword or by streaming realtime data.",
        "Four different data sets were used in the experiments described below.",
        "three were supplied by the organisers of the SemEval?13 shared task on Twitter sentiment analysis (Wilson et al., 2013), in the form of a training set, a smaller initial development set, and a larger development set.",
        "All sets consist of manually annotated tweets on a range of topics, including different products and events.",
        "Tweet-level classification (Task 2B) was split into two subtasks in SemEval?13, one allowing training only on the data sets supplied by the organisers (constrained) and one allowing training also on external data (unconstrained).",
        "To this end, a web application2 for manual annotation of tweets was built and used to annotate a small fourth data set (?NTNU?).",
        "Each of the 461 tweets in the ?NTNU?",
        "data set was annotated by one person only.",
        "The distribution of target classes in the data sets is shown in Table 1.",
        "The data was neither preprocessed nor filtered, and thus contain hashtags, URLs, emoticons, etc.",
        "However, all the data sets provided by SemEval?13 had more than three target classes (e.g., ?objective?, ?objective-OR-neutral?",
        "), so tweets that were not annotated as ?positive?",
        "or ?negative?",
        "were merged into the ?neutral?",
        "target class.",
        "Due to Twitter's privacy policy, the given data sets do not contain the tweet text, but only the tweet ID which in turn can be used to download the text.",
        "The Twitter API has a limit on the number of downloads per hour, so SemEval?13 provided a Python script to scrape texts from https://twitter.com.",
        "This script was slow and did not download the texts for all tweet IDs in the data sets, so a faster and more precise download script3 for node.js was implemented and submitted to the shared task organisers."
      ]
    },
    {
      "heading": "3 Experimental Setup",
      "text": [
        "In order to run sentiment classification experiments, a general system was built.",
        "It has a Sentiment Analysis API Layer which works as a thin extension of the Twitter API, sending all tweets received in parallel to a Sentiment Analysis Classifier server.",
        "After classification, the SA API returns the same JSON structure as the Twitter API sends out, only with an additional attribute denoting the tweet's sentiment.",
        "The Sentiment Analysis Classifier system consists of preprocessing and classification, described below."
      ]
    },
    {
      "heading": "3.1 Preprocessing",
      "text": [
        "As mentioned in the introduction, most approaches to Twitter sentiment analysis start with a preprocessing step, filtering out some Twitter specific symbols and functions.",
        "Go et al. (2009) used ?:)?",
        "and ?:(?",
        "as labels for the polarity, so did not remove these emoticons, but replaced URLs and user names with placeholders.",
        "Kouloumpis et al. (2011) used both an emoticon set and a hashtagged set.",
        "The latter is a subset of the Edinburgh Twitter corpus which consists of 97 million tweets (Petrovic?",
        "et al, 2010).",
        "Some approaches have also experimented with normalizing the tweets, and removing redundant letters, e.g., ?loooove?",
        "and ?crazyyy?, that are used to express a stronger sentiment in tweets.",
        "Redundant letters are therefore often not deleted, but words rather trimmed down to one additional redundant letter, so that the stronger sentiment can be taken into consideration by a score/weight adjustment for that feature.",
        "To find the best features to use, a set of eight different combinations of preprocessing methods was designed, as detailed in Table 2.",
        "These include no preprocessing (P0, not shown in the table), where all characters are included as features; full remove (P4), where all special Twitter features like user names, URLs, hashtags, retweet (RT ) tags, and emoticons are stripped; and replacing Twitter features with placeholder texts to reduce vocabulary.",
        "The ?hashtag as word?",
        "method transforms a hashtag to a regular word and uses the hashtag as a feature.",
        "?Reduce letter duplicate?",
        "removes redundant characters more than three (?happyyyyyyyy!!!!!!?",
        "?",
        "?happyyy!!!?).",
        "Some methods, like P1, P2, P4, P5 and P7 remove user names from the text, as they most likely are just noise for the sentiment.",
        "Still,",
        "the fact that there are references to URLs and user names might be relevant for the sentiment.",
        "To make these features more informative for the machine learning algorithms, a preprocessing method (P3) was implemented for replacing them with placeholders.",
        "In addition, a very rudimentary treatment of negation was added, in which the negation is attached to the preceding and following words, so that they will also reflect the change in sentence polarity.",
        "Even though this preprocessing obviously is Twitter-specific, the results after it will still be domain semi-independent, in as far as the strings produced after the removal of URLs, user names, etc., will be general, and can be used for system training."
      ]
    },
    {
      "heading": "3.2 Classification",
      "text": [
        "The classification step currently supports three machine learning algorithms from the Python scikit-learn4 package: Na?",
        "?ve Bayes (NB), Maximum Entropy (MaxEnt), and Support Vector Machines (SVM).",
        "These are all among the supervised learners that previously have been shown to perform well on TSA, e.g., by Bermingham and Smeaton (2010) who compared SVM and NB for microblogs.",
        "Interestingly, while the SVM technique",
        "normally beats NB and MaxEnt on longer texts, that comparison indicated that it has some trouble with outperforming NB when feature vectors are shorter.",
        "Three different models were implemented: 1.",
        "One-step model: a single algorithm classifies tweets as negative, neutral or positive.",
        "2.",
        "Two-step model: the tweets are first classified as either subjective or neutral.",
        "Those that are",
        "to combine classifiers by generating a set of sub-models, each of which predicts a sentiment on its own and then sends it to a voting process that selects the sentiment with highest score.",
        "In all cases, the final classification is returned to the API Layer sentiment provider."
      ]
    },
    {
      "heading": "4 Experimental Results",
      "text": [
        "Experiments were carried out using the platform introduced in the previous section, with models built on the training set of Table 1.",
        "The testing system generates and trains different models based on a set of parameters, such as classification algorithm, preprocessing methods, whether or not to use inverse document frequency (IDF) or stop words.",
        "A grid search option can be activated, so that a model is generated with the best possible parameter set for the given algorithm, using 10-fold cross validation."
      ]
    },
    {
      "heading": "4.1 Selection of Learners and Features",
      "text": [
        "An extensive grid search was conducted.",
        "This search cycled through different algorithms, parameters and preprocessing techniques.",
        "The following parameters were included in the search.",
        "Three binary (Yes/No) parameters: Use IDF, Use Smooth IDF, and Use Sublinear IDF, together with ngram (unigram/bigram/trigram).",
        "SVM and MaxEnt models in addition included C and NB models alpha parameters, all with the value ranges [0.1/0.3/0.5/0.7/0.8/1.0].",
        "SVM and MaxEnt models also had penalty (L1/L2).",
        "Figure 1 displays the precision, recall, F1-score, and accuracy for each of the thirteen classifiers with the Dev 2 data set (see Table 1) used for evaluation.",
        "Note that most classifiers involving the NB algorithm perform badly, both in terms of accuracy and F-score.",
        "This was observed for the other data sets as well.",
        "Further, we can see that one-step classifiers did better than two-step models, with MaxEnt obtaining the best accuracy, but SVM a slightly better F-score.",
        "all classifiers were trained on the training set of Table 1) A second grid search with the two best classifiers from the first search was performed instead using the smaller Dev 1 data set for evaluation.",
        "The results for both the SVM and MaxEnt classifiers are shown in Table 3.",
        "With the Dev 1 data set, SVM performs much better than MaxEnt.",
        "The larger Dev 2 development set contains more neutral tweets than the Dev 1 set, which gives us reasons to believe that evaluating on the Dev 2 set favours the MaxEnt classifier.",
        "A detailed error analysis was conducted by inspecting the confusion matrices of all classifiers.",
        "In general, classifiers involving SVM tend to give better confusion matrices than the others.",
        "Using SVM only in a one-step model works well for positive and neutral tweets, but a bit poorer for negative.",
        "Two-step models with SVM-based subjectivity classification exhibit the same basic behaviour.",
        "The one-step MaxEnt model classifies more tweets as neutral than the other classifiers.",
        "Using MaxEnt for subjectivity classification and either MaxEnt or SVM for polarity classification performs well, but is too heavy on the positive class.",
        "Boosting does not improve and behaves in a fashion similar to two-step MaxEnt models.",
        "All combinations involving NB tend to heavily favour positive predictions; only the two-step models involving another algorithm for polarity classification gave some improvement for negative tweets.",
        "The confusion matrices of the two best learners are shown in Figures 2a-2d, where a learner is shown to perform better if it has redish colours on the main diagonal and blueish in the other fields, as is the case for SVM on the Dev 1 data set (Figure 2c).",
        "As a part of the grid search, all preprocessing methods were tested for each classifier.",
        "Figure 3 shows that P2 (removing user names, URLs, hashtags prefixes, retweet tokens, and redundant letters) is the preprocessing method which performs best",
        "put is shown from left-to-right: negative-neutral-positive; the correct classes are in the same order, top-to-bottom.",
        "?Hotter?",
        "colours (red) indicate that more instances were assigned; ?colder?",
        "colours (blue) mean fewer instances.)",
        "(gives the best accuracy) and thus used most often (10 times).",
        "Figure 3 also indicates that URLs are noisy and do not contain much sentiment, while hashtags and emoticons tend to be more valuable features (P2 and P7 ?",
        "removing URLs ?",
        "perform best, while P4 and P5 ?",
        "removing hashtags and emoticons in addition to URLs ?",
        "perform badly)."
      ]
    },
    {
      "heading": "4.2 SemEval?13 NTNU Systems and Results",
      "text": [
        "Based on the information from the grid search, two systems were built for SemEval?13.",
        "Since one-step SVM-based classification showed the best performance on the training data, it was chosen for the system participating in the constrained subtask, NTNUC.",
        "The preprocessing also was the one with the best performance on the provided data, P2 which involves lower-casing all letters; reducing letter duplicates; using hashtags as words (removing #); and removing all URLs, user names and RT -tags.",
        "Given the small size of the in-house (?NTNU?)",
        "data set, no major improvement was expected from adding it in the unconstrained task.",
        "Instead, a radically different set-up was chosen to create a new system, and train it on both the in-house and provided data.",
        "NTNUU utilizes a two-step approach, with SVM for subjectivity and MaxEnt for polarity classification, a combination intended to capture the strengths of both algorithms.",
        "No preprocessing was used for the subjectivity step, but user names were removed before attempting polarity classification.",
        "As further described by Wilson et al. (2013), the SemEval?13 shared task involved testing on a set of 3813 tweets (1572 positive, 601 negative, and 1640 neutral).",
        "In order to evaluate classification performance on data of roughly the same length and type, but from a different domain, the evaluation data also included 2094 Short Message Service texts (SMS; 492 positive, 394 negative, and 1208 neutral).",
        "Table 4 shows the results obtained by the NTNU systems on the SemEval?13 evaluation data, in terms of average precision, recall and F-score for all three classes, as well as average F-score for positive and negative tweets only (F1+/?",
        "; i.e., the measure used to rank the systems participating in the shared task)."
      ]
    },
    {
      "heading": "5 Discussion and Conclusion",
      "text": [
        "As can be seen in Table 4, the extra data available to train the NTNUU system did not really help it: it gets outperformed by NTNUC on all measures.",
        "Notably, both systems perform well on the out-of-domain data represented by the SMS messages, which is encouraging and indicates that the approach taken really is domain semi-independent.",
        "This was also reflected in the rankings of the two systems in the shared task: both were on the lower half among the participating systems on Twitter data (24th/36 resp.",
        "10th/15), but near the top on SMS data, with NTNUC being ranked 5th of 28 constrained systems and NTNUU 6th of 15 unconstrained systems.",
        "Comparing the results to those shown in Table 3 and Figure 1, NTNUC's (SVM) performance is in line with that on Dev 2, but substantially worse than on Dev 1; NTNUU (SVM?MaxEnt) performs slightly worse too.",
        "Looking at system output with and without the ?NTNU?",
        "data, both one-step SVM and MaxEnt models and SVM?MaxEnt classified more tweets as negative when trained on the extra data; however, while NTNUC benefited slightly from this, NTNUU even performed better without it.",
        "An obvious extension to the present work would be to try other classification algorithms (e.g., Conditional Random Fields or more elaborate ensembles) or other features (e.g., character n-grams).",
        "Rather than the very simple treatment of negation used here, an approach to automatic induction of scope through a negation detector (Councill et al., 2010) could be used.",
        "It would also be possible to relax the domain-independence further, in particular to utilize sentiment lexica (including twitter specific), e.g., by automatic phrase-polarity lexicon extraction (Velikovich et al., 2010).",
        "Since many users tweet from their smartphones, and a large number of them use iPhones, several tweets contain iPhone-specific smilies (?Emoji?).",
        "Emoji are implemented as their own character set (rather than consisting of characters such as ?:)?",
        "and ?",
        ":(?, etc.",
        "), so a potentially major improvement could be to convert them to character-based smilies or to emotion-specific placeholders."
      ]
    },
    {
      "heading": "Acknowledgements",
      "text": [
        "Thanks to Amitava Das for initial discussions and to the human annotators of the ?NTNU?",
        "data set."
      ]
    }
  ]
}
