{
  "info": {
    "authors": [
      "Mu Li",
      "Yinggong Zhao",
      "Dongdong Zhang",
      "Ming Zhou"
    ],
    "book": "COLING",
    "id": "acl-C10-1075",
    "title": "Adaptive Development Data Selection for Log-linear Model in Statistical Machine Translation",
    "url": "https://aclweb.org/anthology/C10-1075",
    "year": 2010
  },
  "references": [
    "acl-C04-1059",
    "acl-D07-1036",
    "acl-D09-1074",
    "acl-N03-1017",
    "acl-N04-1035",
    "acl-P02-1038",
    "acl-P03-1021",
    "acl-P05-1033",
    "acl-P07-1004",
    "acl-W07-0717"
  ],
  "sections": [
    {
      "text": [
        "Microsoft Research Asia",
        "This paper addresses the problem of dynamic model parameter selection for loglinear model based statistical machine translation (SMT) systems.",
        "In this work, we propose a principled method for this task by transforming it to a test data dependent development set selection problem.",
        "We present two algorithms for automatic development set construction, and evaluated our method on several NIST data sets for the Chinese-English translation task.",
        "Experimental results show that our method can effectively adapt log-linear model parameters to different test data, and consistently achieves good translation performance compared with conventional methods that use a fixed model parameter setting across different data sets."
      ]
    },
    {
      "heading": "1. Introduction",
      "text": [
        "In recent years, log-linear model (Och and Ney, 2002) has been a mainstream method to formulate statistical models for machine translation.",
        "Using this formulation, various kinds of relevant properties and data statistics used in the translation process, either on the monolingual-side or on the bilingual-side, are encoded and used as real-valued feature functions, thus it provides an effective mathematical framework to accommodate a large variety of SMT formalisms with different computational linguistic motivations.",
        "This work was done while the author was visiting Microsoft Research Asia.",
        "Yinggong Zhao*",
        "Nanjing University zhaoyg@nlp.nju.edu.cn",
        "Ming Zhou",
        "Formally, in a log-linear SMT model, given a source sentence f, we are to find a translation e* with largest posterior probability among all possible translations:",
        "and the posterior probability distribution Pr(e|f ) is directly approximated by a log-linear formulation:",
        "= expgM=1 ATOhm(e, f ))Ee' exp(EM=i Amhm(e', f )) in which hm's are feature functions and A = (A1;...,Am) are model parameters (feature weights).",
        "For a successful practical log-linear SMT model, it is usually a combined result of the several efforts:",
        "• Construction of well-motivated SMT models",
        "• Accurate estimation of feature functions",
        "• Appropriate scaling of log-linear model features (feature weight tuning).",
        "In this paper, we focus on the last mentioned issue - parameter tuning for log-linear model.",
        "In general, log-linear model parameters are optimized on a held-out development data set.",
        "Using this method, similarly to many machine learning tasks, the model parameters are solely tuned based on the development data, and the optimality of obtained model on unseen test data relies on the assumption that both development and test data observe identical probabilistic distribution, which often does not hold for real-world data.",
        "The goal of this paper is to investigate novel methods for test data dependent model parameter selection.",
        "We begin with discussing the principle of parameter learning for log-linear SMT models, and explain the rationale of task transformation from parameter selection to development data selection.",
        "We describe two algorithms for automatic development set construction, and evaluated our method on several NIST MT evaluation data sets.",
        "Experimental results show that our method can effectively adapt log-linear model parameters to different test data and achieves consistent good translation performance compared with conventional methods that use a group of fixed model parameters across different data sets."
      ]
    },
    {
      "heading": "2. Model Learning for SMT with Log-linear Models",
      "text": [
        "Model learning refers to the task to estimate a group of suitable log-linear model parameters A = (A1;..., Am) for use in Equation 1, which is often formulated as an optimization problem that finds the parameters maximizing certain goodness of the translations generated by the learnt model on a development corpus D. The goodness can be measured with either the translations' likelihood or specific machine translation evaluation metrics such as TER or BLEU.",
        "More specifically, let e* be the most probable translation of D with respect to model parameters A, and E(e*, A, D) be a score function indicating the goodness of translation e*, then a parameter estimation algorithm will try to find the A which satisfies:",
        "Note when the goodness scoring function E(•) is specified, the parameter learning criterion in Equation 2 indicates that the derivation of model parameters A* only depends on development data D, and does not require any knowledge of test data T. The underlying rationale for this rule is that if the test data T observes the same distribution as D, A* will be optimal for both of them.",
        "On the other side, however, when there are mismatches between development and test data, the translation performance on test data will be suboptimal, which is very common for real-world data.",
        "Due to the difference between data sets, generally there is no such A* that is optimal for multiple data sets at the same time.",
        "Table 1 shows some empirical evidences when two data sets are mutually used as development and test data.",
        "In this setting, we used a hierarchical phrase based decoder and 2 years' evaluation data of NIST Chinese-to-English machine translation task (for the year 2008 only the newswire subset was used because we want to limit both data sets within the same domain to show that data mismatch also exists even if there is no domain difference), and report results using BLEU scores.",
        "Model parameters were tuned using the MERT algorithm (Och, 2003) optimized for BLEU metric.",
        "In our work, we present a solution to this problem by using test data dependent model parameters for test data translation.",
        "As discussed above, since model parameters are solely determined by development dataD, selection oflog-linearmodel parameters is basically equivalent to selecting a set of development data D.",
        "However, automatic development data selection in current SMT research remains a relatively open issue.",
        "Manual selection based on human experience and observation is still a common practice."
      ]
    },
    {
      "heading": "3. Adaptive Model Parameter Selection",
      "text": [
        "An important heuristic behind manual development data selection is to use the dataset which is as similar to test set as possible in order to work around the data mismatch problem to maximal extent.",
        "There are also empirical evidences supporting this heuristics.",
        "For instance, it is generally perceived that data set MT03 is more similar to MT05, while MT06-nw is closer to MT08-nw.",
        "Dev data",
        "MT05",
        "MT08-nw",
        "MT05",
        "0.402",
        "0.306",
        "MT08-nw",
        "0.372",
        "0.343",
        "development sets with the same settings as in Table 1.",
        "As expected, MT06-nw is far more suitable than MT03 as the development data for MT08-nw; yet for test set MT05, the situation is just the opposite.",
        "In this work, this heuristic is further exploited for automatic development data selection when there is no prior knowledge of the test data available.",
        "In the following discussion, we assume the availability of a set of candidate source sentences together with translation references that are qualified for the log-linear model parameter learning task.",
        "Let DF be the full candidate set, given a test set T, the task of selecting a set of development data which can optimize the translation quality on T can be transformed to searching for a suitable subset of DF which is most similar to T:",
        "To achieve this goal, we need to address the following key issues:",
        "• How to define and compute Sim(D,T), the similarity between different data sets;",
        "• How to extract development data sets from a full candidate set for unseen test data.",
        "Computing document similarity is a classical task in many research areas such as information retrieval and document classification.",
        "However, typical methods for computing document similarity may not be suitable for our purpose.",
        "The reasons are two-fold:",
        "1.",
        "The sizes of both development and test data are small in usual circumstances, and using similarity measures such as cosine or dice coefficient based on term vectors will suffer from severe data sparseness problems.",
        "As a result, the obtained similarity measure will not be statistically reliable.",
        "2.",
        "More importantly, what we care about here is not the surface string similarity.",
        "Instead, we need a method to measure how similar two data sets are from the view of a log-linear",
        "SMT model.",
        "Next we start with discussing the similarity between sentences.",
        "Given a source sentence f, we denote its possible translation space with H(f ).",
        "In a log-linear SMT model, every translation e G H(f ) is essentially a feature vector h(e) = (h1,..., hM).",
        "Accordingly, the similarity between two sentences f 1 and f2 should be defined on the feature space of the model in use.",
        "Let V (f ) = {h(e) : e G H(f )} be the set of feature vectors for all translations in H(f ), we have",
        "Because it is not practical to compute Equation 3 directly by enumerating all translations in H(f 1) and H(f2) due to the huge search space in SMT tasks, we need to resort to some approximations.",
        "A viable solution to this is that if we can use a single feature vector h(f ) to represent V(f ), then Equation 3 can be simply computed using existing vector similarity measures.",
        "One reasonable method to derive h(f ) is to use a feature vector based on the average principle each dimension of the vector is set to the expectation of its corresponding feature value over all translations:",
        "An alternative and much simpler way to compute h(f ) is to employ the max principle in which we just use the feature vector of the best translation in H(f ):",
        "where e* = argmaxe P(e|f ).",
        "Note that in both Equation 4 and Equation 5 we make use of e's posterior probability P(e|f ).",
        "Dev data",
        "MT05",
        "MT08-nw",
        "MT03",
        "0.397",
        "0.306",
        "MT06-nw",
        "0.381",
        "0.337",
        "Since the true distribution is unknown, a pre-learnt model M has to be used to assign approximate probabilities to translations, which indicates that the obtained similarity depends on a specific model.",
        "As a convention, we use SimM(/i, /2) to denote the similarity between /1 and /2 based on M, and call M the reference model of the computed similarity.",
        "To avoid unexpected bias caused by a single reference model, multiple reference models can be simultaneously used, and the similarity is defined to be the maximum of all model-dependent similarity values:",
        "where M belongs to {M1,..., Mn}, which is the set of reference models under consideration.",
        "To generalize this method to data set level, we compute the vector h(S) for a data set S = ...,/\\s\\) as follows:",
        "In the following, we sketch a method for automatically building a set of development data based on the full candidate set Dp before seeing any test data.",
        "Theoretically, a subset of Dp containing randomly sampled sentences from Dp will not meet our requirement well because it is very probable that it will observe a distribution similar to Dp.",
        "What we expect is that the pre-built development sets can approximate as many as possible typical data distributions that can be estimated from subsets of DF.",
        "Our solution is based on the assumption that DF can be depicted by some mixture models, hence we can use classical clustering methods such as k-means to partition Dp into subsets with different distributions.",
        "Let Sp be the set of extracted development data from Dp.",
        "The construction of Sdf proceeds as following:"
      ]
    },
    {
      "heading": "1.. Train a log-linear model M p using D p as development data;",
      "text": [
        "2.",
        "Compute a feature vector h(d) for each sentence d G Dp using Mp as reference model;"
      ]
    },
    {
      "heading": "3.. Cluster sentences in D p using h(d)/|d| as feature vectors;",
      "text": [
        "4.",
        "Add obtained sentence clusters to Sdf as candidate development sets.",
        "In the third step, since the feature vector h(d) is defined at sentence level, it is averaged by the number of words in d so that it is irrelevant to the length of a sentence.",
        "Considering the outputs of unsupervised data clustering methods are usually sensitive to initial conditions, we include in Sdfsentence clusters based on different initialization configurations to remove related random effects.",
        "An initialization configuration for sentence clustering in our work includes starting point for each cluster and total number of clusters.",
        "In fact, the inclusion of more sentence clusters increases the diversity of the resulted Sdf as well.",
        "At decoding time, when a test set T is presented, we compute the similarity between T and each development set D G Sdf , and choose the one with largest similarity score as the development set for T:",
        "When a single reference model is used to compute Sim(T, D), Mp is a natural choice.",
        "In the multi-model setting as shown in Equation 6, models learnt from the development sets in Sdf can serve this purpose.",
        "Note in this method model learning is not required for every new test set because the model parameters for each development set in Sdf can also be pre-learnt and ready to be used for decoding.",
        "In the previous method, test data T is only involved in the process of choosing a development set from a list of candidates but not in process of development set construction.",
        "Next we present a method for building a development set on demand based on test data T.",
        "Let Dp = (d1;..., dn) be the data set containing all candidate sentences for development data selection.",
        "The method is iterative process in which development data and learnt model are alternatively updated.",
        "Detailed steps are illustrated as follows:"
      ]
    },
    {
      "heading": "2.. Train a model M» based on D j;",
      "text": [
        "3.",
        "For each dk G Dp, compute the similarity score SirriMi (T, dk) between T and dk based on model Mj;",
        "4.",
        "Select top n candidate sentences with highest similarity scores from Dp to form Di+1;",
        "5.",
        "Repeat step 2 to step 4 until the similarity between T and latest selected development data converges (the increase in similarity measure is less than a specified threshold compared to last round) or the specified iteration limit is reached.",
        "In step 4, Di+1 is greedily extracted from Dp, and there is no guarantee that SimM (T, Di+1) will increase or decrease after a new sentence is added to Di+1.",
        "Thereby the number of selected sentences n needs to be empirically determined.",
        "If n is too small, neither the selected data nor the learnt model parameters will be statistically reliable; while if n is too large, we may have to include some sentences that are not suitable for test data in the development data, and miss the opportunity to extract the most desirable development set.",
        "One drawback of this method is the relatively high computational cost because it requires multiple parameter training passes when any test set is presented to the system for translation."
      ]
    },
    {
      "heading": "4. Experiments 4.1 Data",
      "text": [
        "Experiments were conducted on the data sets used for NIST Chinese-English machine translation evaluation tasks.",
        "MT03 and MT06 data sets, which contain 919 and 1,664 sentences respectively, were used for development data in various settings.",
        "MT04, MT05 and MT08 data sets were used for test purpose.",
        "In some settings, we also used a test set MT0x, which containing 1,000 sentences randomly sampled from the above 3 data sets.",
        "All the translation performance results were measured in terms ofcase-insensitive BLEU scores.",
        "For all experiments, all parallel corpora available to the constrained track of NIST 2008 Chinese-English MT evaluation task were used for translation model training, which consist of around 5.1M bilingual sentence pairs.",
        "GIZA++ was used for word alignment in both directions, which was further refined with the intersec-diag-grow heuristics.",
        "We used a 5-gram language model which was trained from the Xinhua portion of English Giga-word corpus version 3.0 from LDC and the English part of parallel corpora.",
        "We used an in-house implementation of the hierarchical phrase-based decoder as described in Chiang (2005).",
        "In addtion to the standard features used in Chiang (2005), we also used a lexicon feature indicating how many word paris in the translation found in a conventional Chinese-English lexicon.",
        "Phrasal rules were extracted from all the parallel data, but hierarchical rules were only extracted from the FBIS part of the parallel data which contains around 128,000 sentence pairs.",
        "For all the development data, feature weights of the decoder were tuned using the MERT algorithm (Och, 2003).",
        "In the following we first present some overall results using the method of development data pre-construction, then dive into more detailed settings of the experiments.",
        "Table 3 shows the results using 3 different data sets for log-linear model parameter tuning.",
        "Elements in the first column indicate the data sets used for parameter tuning, and other columns contain evaluation results on different test sets.",
        "In the third row of the table, MT03+MT06 means combining the data sets of MT03 and MT06 together to form a larger tuning set.",
        "The first number in each cell denotes the BLEU score using the tuning set as standard development set D, and the second for using the tuning set as a candidate set Dp.",
        "For all experiment settings in the table, we used cosine value between feature vectors to measure similarity between data sets, and feature vectors were computed according to Equation 5 and Equation 7 using a reference model which is trained on the corresponding candidate set Dp as development set.",
        "We adopted the k-means algorithm for data clustering with the number of clusters iterating from 2 to 5.",
        "In each iteration, we ran 4 passes of clustering using different initial values.",
        "Therefore, in total there are 56 sentence clusters generated in each SDf .",
        "From the table it can be seen that given the same set of sentences (MT03, MT06 and MT03+MT06), when they are used as the candidate set Dp for the development set pre-construction method, the translation performance is generally better than when they are just used as development sets as a whole.",
        "Using MT03 data set as Dp is an exception: there is slight performance drop on test sets MT04 and MT05, but it also helps reduce the performance see-saw problem on different test sets as shown in Table 1.",
        "Meanwhile, in the other two settings of Dp, we observed significant BLEU score increase on all test sets but MT0x (on which the performance almost kept unchanged).",
        "In addition, the fact that using MT03+MT06 as Dp achieves best (or almost best) performance on all test sets implies that it should be a better choice to include as diverse data as possible in Dp.",
        "We also appended two oracle BLEU numbers for each test set in Table 3 for reference.",
        "One is denoted with oracle cluster, which is the highest possible BLEU that can be achieved on the test set when the development set must be chosen from the sentence clusters in Smt03+mt06.",
        "The other is labeled as self-training, which is the BLEU score that can be obtained when the test data itself is used as development data.",
        "This number can serve as actual performance upper bound on the test set.",
        "Next we investigated the impact of using different ways to compute feature vectors presented in Section 3.1.",
        "We reran some previous experiments on test sets MT04, MT05 and MT08 using MT03+MT06 as Dp.",
        "Most settings were kept unchanged except that the feature vector of each sentence was computed according to Equation 4.",
        "A 20-best translation list was used to approximate H(f ).",
        "The results are shown in Table 4.",
        "The numbers in the second column are based on Equation 4.",
        "Numbers based on Equation 5 are also listed in the third column for comparison.",
        "In all the experiment settings we did not observe consistent or significant advantage when using Equation 4 over using Equation 5.",
        "Since Equation 5 is much simpler, it is a good decision to use it in practice.",
        "So did we conduct all following experiments based on Equation 5.",
        "Tuning set",
        "MT04",
        "MT05",
        "MT08",
        "MT0x",
        "MT03",
        "0.399/0.392",
        "0.395/0.390",
        "0.241/0.258",
        "0.319/0.322",
        "MT06",
        "0.381 /0.388",
        "0.382/0.391",
        "0.275/0.283",
        "0.343 / 0.342",
        "MT03+MT06",
        "0.391/0.401",
        "0.392/0.397",
        "0.265/0.281",
        "0.336/0.345",
        "Oracle cluster",
        "0.401",
        "0.398",
        "0.293",
        "0.345",
        "Self-training",
        "0.406",
        "0.402",
        "0.298",
        "0.351",
        "Test set",
        "average",
        "max",
        "MT04",
        "0.397",
        "0.401",
        "MT05",
        "0.393",
        "0.397",
        "MT08",
        "0.286",
        "0.281",
        "We are also interested in the correlation between two measures: the similarity between development and test data and the actual translation performance on test data.",
        "First we would like to echo the motivating experiment presented in Section 3.",
        "Table 5 shows the similarity between the data sets used in the experiment with Mmt03+mt06 as reference model.",
        "Obviously the results in Table 2 and Table 5 fit each other very well.",
        "Figure 1 shows the results ofasetofmore comprehensive experiments on MT05 data set concerning the similarity between development and test sets.",
        "In the figure, every data line shows how BLEU score changes when different pre-built development set in SMT03+mt06 is used for model learning.",
        "The data points in each line are sorted by the rank of similarity between the development set in use and the MT05 data set.",
        "We also compared results based on 3 reference model settings.",
        "In the first one (multiple), the similarity was computed using Equation 6, and the reference model set contains all models learnt from the development sets in Smt03+mt06.",
        "The other two settings use reference models learnt from MT06 and MT03+MT06 data sets respectively.",
        "We can observe from the figure that the correlation between BLEU scores and data set similarity can only be identified on macro scales for all the three similarity settings.",
        "Although using data similarity may not be able to select the perfect development data set from Sdf , by picking a development set with highest similarity score, we can usually (almost always) get good enough BLEU scores in our experiments.",
        "We ran two sets of experiments for the method of development data dynamic construction.",
        "The first one was designed to investigate how the size of extracted development data affects the translation performance.",
        "Using MT05 and MT08 as test sets and MT03+MT06 as Dp, we ran experiments for the algorithm presented in Section 3.3 with n = 200 to n = 1, 000.",
        "In this experiment we did not observe significant enough changes in BLEU scores - the difference between the highest and lowest numbers is generally less than 0.005.",
        "The second one aimed at examining how BLEU numbers changes when the extracted development data were iteratively updated.",
        "Figure 2 shows one set of results on test sets MT05 and MT08 using MT03+MT06 data set as Dp and n set to 400.",
        "Iteration",
        "The similarity usually converged after 2 to 3 iterations, which is consistent with trend of BLEU scores on test sets.",
        "However, in all our experimental settings, we did not observe any results significantly better than using the development set pre-construction method.",
        "Dev data",
        "MT05",
        "MT08-nw",
        "MT03",
        "0.99988",
        "0.99012",
        "MT06-nw",
        "0.99004",
        "0.99728",
        "Multiple -1-",
        "MT03+",
        "MT06 MT06",
        "m k",
        "w",
        "MT05 – i-",
        "-",
        "MT08",
        ">",
        "/",
        ":"
      ]
    },
    {
      "heading": "5. Discussions",
      "text": [
        "Some of the previous work related to building adaptive SMT systems were discussed in the domain adaptation context, in which one fundamental idea is to estimate a more suitable domain-specific translation model or language model.",
        "When the target domain is already known, adding a small amount of domain data (both monolingual and bilingual) to the existing training corpora has been shown to be very effective in practice.",
        "But model adaptation is required in more scenarios other than explicitly defined domains.",
        "As shown by the results in Table 2, even for the data from the same domain, distribution mismatch can also be a problem.",
        "There are also considerable efforts made to deal with the unknown distribution of text to be translated, and the research topics were still focused on translation and language model adaptation.",
        "Typical methods used in this direction include dynamic data selection (Lu et al., 2007; Zhao et al., 2004; Hildebrand et al., 1995) and data weighting (Foster and Kuhn, 2007; Matsoukas et al., 2009).",
        "All the mentioned methods use information retrieval techniques to identify relevant training data from the entire training corpora.",
        "Our work presented here also makes no assumption about the distribution of test data, but it differs from the previous methods significantly from a log-linear model's perspective.",
        "Adjusting translation and language models based on test data can be viewed as adaptation of feature values, while our method is essentially adaptation of feature weights.",
        "This difference makes these two kinds of methods complementary to each other – it is possible to make further improvement by using both of them in one task.",
        "To our knowledge, there is no dedicated discussion on principled methods to perform development data selection in previous research.",
        "In Lu et al.",
        "(2007), log-linear model parameters can also be adjusted at decoding time.",
        "But in their approach, the adjustment was based on heuristic rules and re-weighted training data distribution.",
        "In addition, compared with training data selection, the computational cost of development data selection is much smaller.",
        "From machine learning perspective, both proposed methods can be viewed as certain form of transductive learning applied to the SMT task (Ueffing et al., 2007).",
        "But our methods do not rely on surface similarities between training and training/development sentences, and development/test sentences are not used to retrain SMT sub-models."
      ]
    },
    {
      "heading": "6. Conclusions and Future Work",
      "text": [
        "In this paper, we addressed the data mismatch issue between training and decoding time of loglinear SMT models, and presented principled methods for dynamically inferring test data dependent model parameters with development set selection.",
        "We describe two algorithms for this task, development set pre-construction and dynamic construction, and evaluated our method on the NIST data sets for the Chinese-English translation task.",
        "Experimental results show that our methods are capable of consistently achieving good translation performance on multiple test sets with different data distributions without manual tweaking of log-linear model parameters.",
        "Though theoretically using the dynamic construction method could bring better results, the pre-construction method performs comparably well in our experimental settings.",
        "Considering the fact that the pre-consruction method is computationally cheaper, it should be a better choice in practice.",
        "In the future, we are interested in two directions.",
        "One is to explore the possibility to perform data clustering on test set as well and choosing suitable model parameters for each cluster separately.",
        "The other involves dynamic SMT model selection - for example, some parts of the test data fit the phrase-based model better while other parts can be better translated using a syntax-based model."
      ]
    }
  ]
}
