{
  "info": {
    "authors": [
      "Aaron Phillips"
    ],
    "book": "Proceedings of the Joint Fifth Workshop on Statistical Machine Translation and MetricsMATR",
    "id": "acl-W10-1721",
    "title": "The Cunei Machine Translation Platform for WMT ’10",
    "url": "https://aclweb.org/anthology/W10-1721",
    "year": 2010
  },
  "references": [
    "acl-J03-1002",
    "acl-N06-1014",
    "acl-P02-1040",
    "acl-P03-1021",
    "acl-P06-2101",
    "acl-P07-2045",
    "acl-W09-0424"
  ],
  "sections": [
    {
      "text": [
        "The Cunei Machine Translation Platform for WMT '10",
        "Aaron B. Phillips",
        "Carnegie Mellon Pittsburgh, USA.",
        "This paper describes the Cunei Machine Translation Platform and how it was used in the WMT '10 German to English and Czech to English translation tasks."
      ]
    },
    {
      "heading": "1. The Cunei Machine Translation Platform",
      "text": [
        "The Cunei Machine Translation Platform (Phillips and Brown, 2009) is open-source software and freely available at http://www.cunei.",
        "org/.",
        "Like Moses (Koehn et al., 2007) and Joshua (Li et al., 2009), Cunei provides a statistical decoder that combines partial translations (either phase pairs or grammar rules) in order to compose a coherent sentence in the target language.",
        "What makes Cunei unique is that it models the translation task with a non-parametric model that assesses the relevance of each translation instance.",
        "The process begins by encoding in a lattice all possible contiguous phrases from the input.",
        "For each source phrase in the lattice, Cunei locates instances of it in the corpus and then identifies the aligned target phrase(s).",
        "This much is standard to most data-driven MT systems.",
        "The typical step at this stage is to model a phrase pair by computing relative frequencies over the collection of translation instances.",
        "This model for the phrase pair will never change and knowledge of the translation instances can subsequently be discarded.",
        "In contrast to using a phrase pair as the basic unit of modeling, Cunei models each translation instance.",
        "A distance function, represented by a log-linear model, scores the relevance of each translation instance.",
        "Our model then sums the scores of translation instances that predict the same target hypothesis.",
        "The advantage of this approach is that it provides a flexible framework for novel sources of information.",
        "The non-parametric model still uses information gleaned over all translation instances, but it permits us to define a distance function that operates over one translation instance at a time.",
        "This enables us to score a wide-variety of information represented by the translation instance with respect to the input and the target hypothesis under consideration.",
        "For example, we could compute how similar one translation instance's parse tree or morpho-syntactic information is to the input.",
        "Furthermore, this information will vary throughout the corpus with some translation instances exhibiting higher similarity to the input.",
        "Our approach captures that these instances are more relevant and they will have a larger effect on the model.",
        "For the WMT '10 task, we exploited instance-specific context and alignment features which will be discussed in more detail below.",
        "Cunei's model is a hybrid between the approaches of Statistical MT and Example-Based MT.",
        "A typical SMT model will score a phrase pair with source s, target t, log features 0, and weights A using a log-linear model, as shown in Equation 1 of Figure 1.",
        "There is no prototypical model for EBMT, but Equation 2 demonstrates a reasonable framework where evidence for the phrase pair is accumulated over all instances of translation.",
        "Each instance of translation from the corpus has a source s' and target t'.",
        "In the most limited case s = s' and t = t', but typically an EBMT system will have some notion of similarity and use instances of translation that do not exactly match the input.",
        "Cunei's model is defined in such a way that we maintain the distance function <fi(s,s',t',t) from the EBMT model, but compute it in a much more efficient manner.",
        "In particular, we remove the realspace summation within a logarithm that makes it impractical to tune model weights.",
        "However, our model preserves the first-order derivative of Equation 2, which is useful during optimization to locally approximate the hypothesis space.",
        "While the inner term initially appears complex, it is simply the expectation of each feature under the distribution of translation instances and can be efficiently computed with an online update.",
        "Last, the introduction of 6, a slack variable, is necessary to additionally ensure that the score of this model is equal to Equation 2.",
        "Specifying the model in this manner ties together the two different modeling approaches pursued by SMT and EBMT; the SMT model of Equation 1 is merely a special case of our model when the features for all instances of a translation are constant such that <k(s,s',t',t) = <k(s,t) Vs',t'.",
        "Indeed, this distinction illuminates the primary advantage of our model.",
        "Each feature is calculated particular to one translation instance in the corpus and each translation instance is scored individually.",
        "The model is then responsible for aggregating knowledge across multiple instances of translation.",
        "Unlike the SMT model, our aggregate model does not maintain feature independence.",
        "Each instance of translation represents a joint set of features.",
        "The higher the score of a translation instance, the more all its features inform the aggregate model.",
        "Thus, our model is biased toward feature values that represent relevant translation instances.",
        "Not all translations found in a corpus are equally useful.",
        "Often, when dealing with data of varying quality, training a SMT system on all of the data degrades performance.",
        "A common workaround is to perform some sort of sub-sampling that selects a small quantity of novel phrase pairs from the large out-of-domain corpus such that they do not overwhelm the number of phrase pairs extracted from the smaller in-domain corpus.",
        "Instead of building our model from a heuristic sub-sample, we utilize Cunei's modeling approach to explicitly identify the relevance of each translation instance.",
        "We add features to the model that identify when a translation instance occurs within the same context as the input.",
        "This permits us to train on all available data by dynamically weighting each instance of a translation.",
        "First, we capture the broader context or genre of a translation instance by comparing the document in the corpus from which it was extracted to the input document.",
        "These documents are modeled as a bag of words, and we use common document-level distance metrics from the field of information retrieval.",
        "Specifically, we implement as features document-level precision, recall, cosine distance and Jensen-Shannon distance (Lin, 1991).",
        "In order to capture local, intra-sentential context, we compare the words immediately to the left and right of each translation instance with the input.",
        "We add one feature that counts the total number of adjacent words that match the input and a second feature that penalizes translation instances whose adjacent context only (or mostly) occurs in one direction.",
        "As a variation on the same concept, we also add four binary features that indicate when a unigram or bigram match is present on the left or right hand side.",
        "The corpus in which an instance is located can also substantially alter the style of a translation.",
        "For example, both the German to English and the Czech to English corpora consisted of in-domain News Commenary and out-of-domain Europarl text.",
        "When creating the index, Cunei stores the name of the corpus that is associated with each sentence.",
        "From this information we create a set of binary features for each instance of translation that indicate from which corpus the instance originated.",
        "The weights for these origin features can be conceived as mixture weights specifying the relevance of each corpus.",
        "After a match is found on the source-side of the corpus, Cunei must determine the target phrase to which it aligns.",
        "The phrase alignment is treated as a hidden variable and not specified during training.",
        "Ideally, the full alignment process would be carried out dynamically at run-time.",
        "Unfortunately, even a simple word alignment such as IBM Model-1 is too expensive.",
        "Instead, we run a word aligner offline and our on-line phrase alignment computes features over the the word alignments.",
        "The phrase alignment features are then components of the model for each translation instance.",
        "While the calculations are not exactly the same, conceptually this work is modeled after (Vogel, 2005).",
        "For each source-side match in the corpus, an alignment matrix is loaded for the complete sentence in which the match resides.",
        "This alignment matrix contains scores for all word correspondences in the sentence pair and can be created using GIZA++ (Och and Ney, 2003) or the Berkeley aligner (Liang et al., 2006).",
        "Intuitively, when a source phrase is aligned to a target phrase, this implies that the remainder of the source sentence that is not specified by the source phrase is aligned to the remainder of the target sentence not specified by the target phrase.",
        "Separate features compute the probability that the word alignments for tokens within the phrase are concentrated within the phrase boundaries and that the word alignments for tokens outside the phrase are concentrated outside the phrase boundaries.",
        "In addition, words with no alignment links or weak alignments links demonstrate uncertainty in modeling.",
        "To capture this effect, we incorporate two more features that count the number of uncertain alignments present in the source phrase and the target phrase.",
        "The features described above assess the phrase alignment likelihood for a particular translation instance.",
        "Because they operate over all the word alignments present in a sentence, the alignment scores are contextual and usually vary from instance to instance.",
        "As the model weights change, so too will the phrase alignment scores.",
        "Each source phrase is modeled as having some probability of aligning to every possible target phrase within a given sentence.",
        "However, it is not practical to compute all possible phrase alignments, so we extract translation instances using only a few high-scoring phrase alignments for each occurrence of a source phrase in the corpus.",
        "As discussed previously, these extracted translation instances form the basic modeling unit in Cunei.",
        "Cunei's built-in optimization code closely follows the approach of (Smith and Eisner, 2006), which minimizes the expectation of the loss function over the distribution of translations present in the n-best list.",
        "Following (Smith and Eisner, 2006), we implemented iog(BLEU) as the loss function such that the objective function can be decomposed as the expected value of BLEU's brevity penalty and the expected value of BLEU's precision score.",
        "The optimization process slowly anneals the distribution of the n-best list in order to avoid local minima.",
        "This begins with a near uniform distribution of translations and eventually reaches a distribution where, for each sentence, nearly all of the probability mass resides on the top translation (and corresponds closely with the actual 1-best BLEU score).",
        "In addition, Cunei supports the ability to decode sentences toward a particular set of references.",
        "This is used to prime the optimization process in the first iteration with high-scoring, obtainable translations."
      ]
    },
    {
      "heading": "2. The WMT '10 Translation Task",
      "text": [
        "For the WMT '10 Translation Task we built two systems.",
        "The first translated from German to English and was trained with the provided News Commentary and Europarl (Koehn, 2005) corpora.",
        "The second system translated from Czech to English and used the CzEng 0.9 corpus (Bojar and Zabokrtsky, 2009), which is a collection of many different texts and includes the Europarl.",
        "To validate our results, we also trained a Moses system with the same corpus, alignments, and language model.",
        "A large number of hand-crafted regular expressions were used to remove noise (control characters, null bytes, etc.",
        "), normalize (hard spaces vs. soft spaces, different forms of quotations, render XML codes as characters, etc.",
        "), and tokenize (abbreviations, numbers, punctuation, etc.).",
        "However, these rules are fairly generic and applicable to most Western languages.",
        "In particular, we did not perform any morphologically-sensitive segmentation.",
        "From the clean text we calculated the expected word and character ratios between the source language and the target language.",
        "Then we proceeded to remove sentence pairs according to the following heuristics:",
        "• A sentence exceeded 125 words",
        "• A sentence exceeded 1,000 characters",
        "• The square of the difference between the actual and expected characters divided by the square of the standard deviation exceeded 5",
        "All of these processing routines are included as part of the Cunei distribution and are configurable options.",
        "An overview of the resulting corpora is shown in Table 1.",
        "Finally, we used the GIZA++ toolkit (Och and Ney, 2003) to induce word alignments in both directions for each language pair.",
        "The resulting corpus and word alignments were provided to Moses and Cunei for training.",
        "Each system used their respective phrase extraction and model estimation routines.",
        "We intentionally selected two language pairs that translated into English so that we could share one language model between them.",
        "We used the large monolingual English News text made available through the workshop and augmented this with the Xinhua and AFP sections of the English Gi-gaword corpus (Parker and others, 2009).",
        "In all, approximately one billion words of English text were fed to the SRILM toolkit (Stolcke, 2002) to construct a single English 5-gram language model with Kneser-Ney smoothing.",
        "The newswire evaluation sets from the prior two years were selected as development data.",
        "636 sentences were sampled from WMT '09 for tuning and all 2,051 sentences from WMT '08 were reserved for testing.",
        "Finally, a blind evaluation was also performed with the new WMT '10 test set.",
        "All systems were tuned toward BLEU (Papineni et al., 2002) and all evaluation metrics were run on lowercased, tokenized text.",
        "The results in Table 2 and Table 3 show the performance of Cunei against the Moses system we also built with the same data.",
        "The first Cunei system we built included all the alignment features discussed in §1.3.",
        "These per-instance alignment features are essential to Cunei's runtime phrase extraction and cannot be disabled.",
        "The second, and complete, system added to this all the context features described in §1.2.",
        "Cunei, in general, performs significantly better than Moses in German and is competitive with Moses in Czech.",
        "However, we hoped to see a larger gain from the addition of the context features.",
        "In order to better understand our results and see if there was greater potential for the context features, we selectively added a few of the features at a time to the German system.",
        "These experiments are reported in Table 4.",
        "What is interesting here is that most subsets of context features did better than the whole and none degraded the baseline (at least according to BLEU) on the test sets.",
        "We did not expect a fully additive gain from the combination, as many of the context features do represent different ways of capturing the same phenomena.",
        "However, we were still surprised to find an apparently detrimental interaction among the full set of context features.",
        "Theoretically adding new features should only improve a system as a feature can always by ignored by assigning it a weight of zero.",
        "However, new features expand the hypothesis space and provide the model with more degrees of freedom which may make it easier to get stuck in local minima.",
        "While the gradient-based, annealing method for optimization that we use tends work better than MERT (Och, 2003), it is still susceptible to these issues.",
        "Indeed, the variation on the tuning set-while relatively inconsequential-is evidence that this is occurring and that we have not found the global optimum.",
        "Further investigation is necessary into the interaction between the context features and techniques for robust optimization.",
        "We used the Cunei Machine Translation Platform to build German to English and Czech to English systems for the WMT '10 evaluation.",
        "In both systems we experimented with per-instance alignment and context features.",
        "Our addition of the context features resulted in only minor improvement, but a deeper analysis of the individual features suggests greater potential.",
        "Overall, Cunei performed strongly in our evaluation against a comparable Moses system.",
        "We acknowledge that the actual features we selected are not particularly novel.",
        "Instead, the importance of this work is the simplicity with which instance-specific features can be jointly modeled and integrated within Cunei as a result of its unique modeling approach."
      ]
    },
    {
      "heading": "Acknowledgements",
      "text": [
        "The author would like to thank Ralf Brown for providing suggestions and feedback on this paper.",
        "German",
        "English",
        "Czech",
        "English",
        "Tokens Sentences",
        "41,245,188 157^",
        "43,064,069 KM4",
        "63,776,164 618",
        "72,325,831 270",
        "TER",
        "0.6313 0.6224 0.6198",
        "I Test",
        "Meteor",
        "0.5591 0.5573 0.5575",
        "NIST",
        "6.5657 6.6355 6.6467",
        "BLEU",
        "0.2097 0.2210 0.2214",
        "TER",
        "0.6523 0.6430 0.6408",
        "ent Test",
        "Meteor",
        "0.5330 0.5342 0.5344",
        "Developr",
        "NIST",
        "6.2802 6.3639 6.3753",
        "BLEU",
        "0.2046 0.2125 0.2127",
        "TER",
        "0.6475 0.6375 0.6362",
        "ent Tunin",
        "Meteor",
        "0.5286 0.5326 0.5331",
        "»evelopmi",
        "NIST",
        "5.9156 5.9847 6.0021",
        "D",
        "BLEU",
        "0.1916 0.2018 0.2022",
        "TER",
        "0.6054 0.6003 0.5984",
        "Test",
        "Meteor",
        "0.5617 0.5665 0.5676",
        "Blinc",
        "NIST",
        "6.7916 6.8464 6.8829",
        "BLEU",
        "0.2297 0.2291 0.2315",
        "TER",
        "0.6422 0.6391 0.6362",
        "ent Test",
        "Meteor",
        "0.5361 0.5425 0.5398",
        "Developr",
        "NIST",
        "6.3574 6.4116 6.4391",
        "BLEU",
        "0.2041 0.2058 0.2065",
        "g",
        "TER",
        "0.6170 0.6128 0.6125",
        "ent Tunin",
        "Meteor",
        "0.5536 0.5555 0.5567",
        "evelopm",
        "NIST",
        "6.1969 6.2634 6.2802",
        "D",
        "BLEU",
        "0.2141 0.2206 0.2170",
        "TER",
        "0.6224 0.6208 0.6172 0.6202 0.6209 0.6206",
        "Test",
        "Meteor",
        "0.5573 0.5609 0.5574 0.5564 0.5579 0.5608",
        "Blinc",
        "NIST",
        "6.6355 6.6719 6.7336 6.6656 6.6647 6.6900",
        "BLEU",
        "0.2210 0.2221 0.2237 0.2235 0.2228 0.2244",
        "TER",
        "0.6430 0.6391 0.6431 0.6434 0.6456 0.6410",
        "ent Test",
        "Meteor",
        "0.5342 0.5361 0.5354 0.5329 0.5324 0.5361",
        "Develop",
        "NIST",
        "6.3639 6.4154 6.4183 6.3598 6.3498 6.3984",
        "BLEU",
        "0.2125 0.2150 0.2147 0.2137 0.2134 0.2145",
        "g",
        "TER",
        "0.6375 0.6353 0.6402 0.6410 0.6422 0.6376",
        "ent Tunin",
        "Meteor",
        "0.5326 0.5370 0.5338 0.5310 0.5305 0.5315",
        "evelopm",
        "NIST",
        "5.9847 6.0233 6.0080 5.9648 5.9514 5.9764",
        "D",
        "BLEU",
        "0.2018 0.2010 0.2002 0.2011 0.1987 0.2007"
      ]
    }
  ]
}
